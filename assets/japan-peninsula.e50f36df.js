import{l as L,E as z,F as C,j as D,r as l,o as c,b as p,d as r,t as n,C as _,D as f,g as M,e as u,n as d,w as y,h as S}from"./vendor.51a5f608.js";import{s as E,a as I,b as V,c as N,d as O,e as P,f as G,g as T,h as B,i as J,j as H,k as R,l as U}from"./chroma.3b8408f4.js";import{f as Z}from"./browser-ponyfill.bea9ad7a.js";import{m as X}from"./util.10171c47.js";import{_ as Y}from"./app.c17b7d26.js";var b={};L.add(z);const w={components:{LGeoJson:E,LMap:I,LIcon:V,LTileLayer:N,LMarker:O,LControl:P,LControlLayers:G,LTooltip:T,LPopup:B,LPolyline:J,LPolygon:H,LRectangle:R,FontAwesomeIcon:C},data(){return{zoom:6,iconWidth:25,iconHeight:40,geojson:null,options:{style:this.style,onEachFeature:this.onEachFeatureFunction},focused:null,targetFeatures:["A18_010","A18_079","A18_083","A18_086"],targetFeature:"A18_010",active:!1,selected:null,featureDict:{A18_010:"\u7DCF\u4EBA\u53E3",A18_079:"\u8001\u5E74\u4EBA\u53E3",A18_083:"\u8FB2\u6797\u696D\u5C31\u696D\u8005",A18_086:"\u6F01\u696D\u5C31\u696D\u8005"},min:0,max:0}},created(){D(X(this,{title:"Japan Peninsula",description:"Japan Peninsula,\u65E5\u672C\u306E\u534A\u5CF6",image:"japan-peninsula.png",twittercard:"summary_large_image"}))},async mounted(){const o={}.VITE_HOGE;let t=await(await Z(o+"/data/peninsula.geojson")).json();t.features=t.features.filter(i=>i.properties.A18_007!=="\u7D00\u4F0A"),this.geojson=t},computed:{features(){return this.geojson?this.geojson.features.map(o=>o.properties):[]},colorScale(){const o=Math.min(...this.features.map(e=>e[this.targetFeature])),s=Math.max(...this.features.map(e=>e[this.targetFeature])),[t,i]=this.fff(s,o);return this.max=t,this.min=i,U.exports.scale(["white","pink","red"]).domain([i,t])}},methods:{fff(o,s){const t=Math.pow(10,o.toString().length-1);return[Math.ceil(o/t)*t,Math.floor(s/(t-1))*(t-1)]},onEachFeatureFunction(o,s){s.on({mouseover:t=>{t.target.setStyle({weight:4,color:"red"})},mouseout:t=>{var i;console.log("mouseout",t.target),t.target.feature.properties.A18_001!==((i=this.selected)==null?void 0:i.feature.properties.A18_001)&&t.target.setStyle({weight:2,color:"black"})},click:t=>{console.log("click",t.target),this.selected&&t.target!==this.selected&&this.selected.setStyle({weight:2,color:"black"}),this.selected=t.target,this.selected.setStyle({weight:4,color:"red"})}})},style(o){return{weight:2,color:"black",opacity:.5,fillColor:this.colorScale(o.properties[this.targetFeature]).name(),fillOpacity:.5}},fuga(o,s){this.targetFeature=o,this.active=!1},piyo(o){if(o.relatedTarget.localName==="a"){o.preventDefault();return}this.active=!1}},watch:{targetFeature(o){for(const s in this.$refs.hoge.leafletObject._layers){const t=this.$refs.hoge.leafletObject._layers[s];t.setStyle({fillColor:this.colorScale(t.feature.properties[this.targetFeature]).name()})}}}},q={class:"bottom-left-pane"},Q={style:{"font-size":"2rem"}},W=S("\u534A\u5CF6\u540D\uFF1A"),K={key:0},$={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},ee={class:"dropdown-content"},te=["onClick"],oe={class:"dropdown-trigger"},se={class:"icon is-small"},re={class:"columns is-mobile is-marginless is-fullheight"},ae=r("div",{class:"column is-half"},[r("span",{style:{display:"block",width:"100%",height:"100%","background-image":"linear-gradient(to top, white, pink, red)"}})],-1),ie={id:"color-scale-legend",class:"column is-half"};function ne(o,s,t,i,e,h){var g;const v=l("font-awesome-icon"),j=l("l-tile-layer"),k=l("l-control-attribution"),F=l("l-geo-json"),x=l("l-control"),A=l("l-map");return c(),p("div",null,[r("div",q,[r("p",Q,[W,r("b",null,n(((g=e.selected)==null?void 0:g.feature.properties.A18_007)||"\u672A\u9078\u629E"),1)]),e.selected?(c(),p("div",K,[(c(!0),p(_,null,f(e.targetFeatures,a=>{var m;return c(),p("p",{class:d({"has-text-weight-bold":a===e.targetFeature})},n(e.featureDict[a])+": "+n((m=e.selected)==null?void 0:m.feature.properties[a]),3)}),256))])):M("",!0)]),r("div",{class:d(["dropdown top-right-pane",{"is-active":e.active}]),style:{position:"absolute","z-index":"999"}},[r("div",$,[r("div",ee,[(c(!0),p(_,null,f(e.targetFeatures,a=>(c(),p("a",{href:"#",class:d(["dropdown-item",{"is-active":a===e.targetFeature}]),onClick:m=>h.fuga(a,m)},n(e.featureDict[a]),11,te))),256))])]),r("div",oe,[r("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:s[0]||(s[0]=a=>e.active=!e.active),onBlur:s[1]||(s[1]=(...a)=>h.piyo&&h.piyo(...a))},[r("span",null,n(e.featureDict[e.targetFeature]),1),r("span",se,[u(v,{icon:"angle-down"})])],32)])],2),u(A,{modelValue:e.zoom,"onUpdate:modelValue":s[2]||(s[2]=a=>e.zoom=a),zoom:e.zoom,"onUpdate:zoom":s[3]||(s[3]=a=>e.zoom=a),center:[36.2048,138.2529],style:{height:"100%",width:"100%"}},{default:y(()=>[u(j,{url:"https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaGl0b2t1biIsImEiOiJjaXVqYnd0NXUwMGRwMm9tc3RvcGZ1ZDZ5In0.Q4wyiiGDLH_lTi3zzFcAtA",attribution:"Maptiles by <a href='http://mierune.co.jp/' target='_blank'>MIERUNE</a>, under CC BY. Data by <a href='http://osm.org/copyright' target='_blank'>OpenStreetMap</a> contributors, under ODbL."}),u(k,{position:"bottomright"}),u(F,{geojson:e.geojson,options:e.options,ref:"hoge"},null,8,["geojson","options"]),u(x,{position:"bottomright",class:"bottom-right-pane"},{default:y(()=>[r("div",re,[ae,r("div",ie,[r("p",null,n(e.max),1),r("p",null,n(e.min),1)])])]),_:1})]),_:1},8,["modelValue","zoom","center"])])}typeof b=="function"&&b(w);var he=Y(w,[["render",ne]]);export{he as default};
