import{l as L,I as z,F as C,j as M,r as l,o as c,b as p,d as r,t as n,G as _,H as f,g as D,e as u,n as d,w as y,h as S}from"./vendor.d6f5ed9a.js";import{s as I,a as V,b as E,c as N,d as P,e as G,f as O,g as B,h as J,i as T,j as H,k as R,l as U}from"./chroma.c5c766fe.js";import{f as Z}from"./browser-ponyfill.1ccd4833.js";import{m as X}from"./util.873c9cd3.js";import{_ as Y}from"./app.27bf957d.js";var b={};L.add(z);const w={components:{LGeoJson:I,LMap:V,LIcon:E,LTileLayer:N,LMarker:P,LControl:G,LControlLayers:O,LTooltip:B,LPopup:J,LPolyline:T,LPolygon:H,LRectangle:R,FontAwesomeIcon:C},data(){return{zoom:6,iconWidth:25,iconHeight:40,geojson:null,options:{style:this.style,onEachFeature:this.onEachFeatureFunction},focused:null,targetFeatures:["A18_010","A18_079","A18_083","A18_086"],targetFeature:"A18_010",active:!1,selected:null,featureDict:{A18_010:"\u7DCF\u4EBA\u53E3",A18_079:"\u8001\u5E74\u4EBA\u53E3",A18_083:"\u8FB2\u6797\u696D\u5C31\u696D\u8005",A18_086:"\u6F01\u696D\u5C31\u696D\u8005"},min:0,max:0}},created(){M(X(this,{title:"Japan Peninsula",description:"Japan Peninsula,\u65E5\u672C\u306E\u534A\u5CF6",image:"japan-peninsula.png",twittercard:"summary_large_image"}))},async mounted(){let t=await(await Z("https://hitokun-s.github.io"+"/data/peninsula.geojson")).json();t.features=t.features.filter(a=>a.properties.A18_007!=="\u7D00\u4F0A"),this.geojson=t},computed:{features(){return this.geojson?this.geojson.features.map(s=>s.properties):[]},colorScale(){const s=Math.min(...this.features.map(e=>e[this.targetFeature])),o=Math.max(...this.features.map(e=>e[this.targetFeature])),[t,a]=this.fff(o,s);return this.max=t,this.min=a,U.exports.scale(["white","pink","red"]).domain([a,t])}},methods:{fff(s,o){const t=Math.pow(10,s.toString().length-1);return[Math.ceil(s/t)*t,Math.floor(o/(t-1))*(t-1)]},onEachFeatureFunction(s,o){o.on({mouseover:t=>{t.target.setStyle({weight:4,color:"red"})},mouseout:t=>{var a;console.log("mouseout",t.target),t.target.feature.properties.A18_001!==((a=this.selected)==null?void 0:a.feature.properties.A18_001)&&t.target.setStyle({weight:2,color:"black"})},click:t=>{console.log("click",t.target),this.selected&&t.target!==this.selected&&this.selected.setStyle({weight:2,color:"black"}),this.selected=t.target,this.selected.setStyle({weight:4,color:"red"})}})},style(s){return{weight:2,color:"black",opacity:.5,fillColor:this.colorScale(s.properties[this.targetFeature]).name(),fillOpacity:.5}},fuga(s,o){this.targetFeature=s,this.active=!1},piyo(s){if(s.relatedTarget.localName==="a"){s.preventDefault();return}this.active=!1}},watch:{targetFeature(s){for(const o in this.$refs.hoge.leafletObject._layers){const t=this.$refs.hoge.leafletObject._layers[o];t.setStyle({fillColor:this.colorScale(t.feature.properties[this.targetFeature]).name()})}}}},q={class:"bottom-left-pane"},Q={style:{"font-size":"2rem"}},W=S("\u534A\u5CF6\u540D\uFF1A"),K={key:0},$={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},ee={class:"dropdown-content"},te=["onClick"],oe={class:"dropdown-trigger"},se={class:"icon is-small"},re={class:"columns is-mobile is-marginless is-fullheight"},ie=r("div",{class:"column is-half"},[r("span",{style:{display:"block",width:"100%",height:"100%","background-image":"linear-gradient(to top, white, pink, red)"}})],-1),ae={id:"color-scale-legend",class:"column is-half"};function ne(s,o,t,a,e,h){var g;const v=l("font-awesome-icon"),j=l("l-tile-layer"),k=l("l-control-attribution"),F=l("l-geo-json"),x=l("l-control"),A=l("l-map");return c(),p("div",null,[r("div",q,[r("p",Q,[W,r("b",null,n(((g=e.selected)==null?void 0:g.feature.properties.A18_007)||"\u672A\u9078\u629E"),1)]),e.selected?(c(),p("div",K,[(c(!0),p(_,null,f(e.targetFeatures,i=>{var m;return c(),p("p",{class:d({"has-text-weight-bold":i===e.targetFeature})},n(e.featureDict[i])+": "+n((m=e.selected)==null?void 0:m.feature.properties[i]),3)}),256))])):D("",!0)]),r("div",{class:d(["dropdown top-right-pane",{"is-active":e.active}]),style:{position:"absolute","z-index":"999"}},[r("div",$,[r("div",ee,[(c(!0),p(_,null,f(e.targetFeatures,i=>(c(),p("a",{href:"#",class:d(["dropdown-item",{"is-active":i===e.targetFeature}]),onClick:m=>h.fuga(i,m)},n(e.featureDict[i]),11,te))),256))])]),r("div",oe,[r("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:o[0]||(o[0]=i=>e.active=!e.active),onBlur:o[1]||(o[1]=(...i)=>h.piyo&&h.piyo(...i))},[r("span",null,n(e.featureDict[e.targetFeature]),1),r("span",se,[u(v,{icon:"angle-down"})])],32)])],2),u(A,{modelValue:e.zoom,"onUpdate:modelValue":o[2]||(o[2]=i=>e.zoom=i),zoom:e.zoom,"onUpdate:zoom":o[3]||(o[3]=i=>e.zoom=i),center:[36.2048,138.2529],style:{height:"100%",width:"100%"}},{default:y(()=>[u(j,{url:"https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaGl0b2t1biIsImEiOiJjaXVqYnd0NXUwMGRwMm9tc3RvcGZ1ZDZ5In0.Q4wyiiGDLH_lTi3zzFcAtA",attribution:"Maptiles by <a href='http://mierune.co.jp/' target='_blank'>MIERUNE</a>, under CC BY. Data by <a href='http://osm.org/copyright' target='_blank'>OpenStreetMap</a> contributors, under ODbL."}),u(k,{position:"bottomright"}),u(F,{geojson:e.geojson,options:e.options,ref:"hoge"},null,8,["geojson","options"]),u(x,{position:"bottomright",class:"bottom-right-pane"},{default:y(()=>[r("div",re,[ie,r("div",ae,[r("p",null,n(e.max),1),r("p",null,n(e.min),1)])])]),_:1})]),_:1},8,["modelValue","zoom","center"])])}typeof b=="function"&&b(w);var he=Y(w,[["render",ne]]);export{he as default};
