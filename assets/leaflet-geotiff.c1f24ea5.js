import{a as ci}from"./leaflet-src.f69ee143.js";function vi(r,t){return t.forEach(function(e){e&&typeof e!="string"&&!Array.isArray(e)&&Object.keys(e).forEach(function(i){if(i!=="default"&&!(i in r)){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})}),Object.freeze(r)}var lt={exports:{}},Ct={exports:{}},Ge={},Pt={},ht=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Bt=new RegExp("[\\-\\.0-9"+ht.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Mt=new RegExp("^"+ht.source+Bt.source+"*(?::"+ht.source+Bt.source+"*)?$"),Ee=0,ne=1,he=2,De=3,ue=4,ce=5,Te=6,Ve=7;function Lt(){}Lt.prototype={parse:function(r,t,e){var i=this.domBuilder;i.startDocument(),Gt(t,t={}),di(r,t,e,i,this.errorHandler),i.endDocument()}};function di(r,t,e,i,n){function a(I){if(I>65535){I-=65536;var O=55296+(I>>10),X=56320+(I&1023);return String.fromCharCode(O,X)}else return String.fromCharCode(I)}function s(I){var O=I.slice(1,-1);return O in e?e[O]:O.charAt(0)==="#"?a(parseInt(O.substr(1).replace("x","0x"))):(n.error("entity not found:"+I),I)}function o(I){if(I>p){var O=r.substring(p,I).replace(/&#?\w+;/g,s);c&&h(p),i.characters(O,0,I-p),p=I}}function h(I,O){for(;I>=l&&(O=d.exec(r));)f=O.index,l=f+O[0].length,c.lineNumber++;c.columnNumber=I-f+1}for(var f=0,l=0,d=/.*(?:\r\n?|\n)|.*$/g,c=i.locator,u=[{currentNSMap:t}],m={},p=0;;){try{var g=r.indexOf("<",p);if(g<0){if(!r.substr(p).match(/^\s*$/)){var y=i.doc,D=y.createTextNode(r.substr(p));y.appendChild(D),i.currentElement=D}return}switch(g>p&&o(g),r.charAt(g+1)){case"/":var _=r.indexOf(">",g+3),w=r.substring(g+2,_),v=u.pop();_<0?(w=r.substring(g+2).replace(/[\s<].*/,""),n.error("end tag name: "+w+" is not complete:"+v.tagName),_=g+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),n.error("end tag name: "+w+" maybe not complete"),_=g+1+w.length);var T=v.localNSMap,E=v.tagName==w,x=E||v.tagName&&v.tagName.toLowerCase()==w.toLowerCase();if(x){if(i.endElement(v.uri,v.localName,w),T)for(var S in T)i.endPrefixMapping(S);E||n.fatalError("end tag name: "+w+" is not match the current start tagName:"+v.tagName)}else u.push(v);_++;break;case"?":c&&h(g),_=yi(r,g,i);break;case"!":c&&h(g),_=wi(r,g,i,n);break;default:c&&h(g);var N=new Vt,b=u[u.length-1].currentNSMap,_=pi(r,g,N,b,s,n),k=N.length;if(!N.closed&&mi(r,_,N.tagName,m)&&(N.closed=!0,e.nbsp||n.warning("unclosed xml attribute")),c&&k){for(var $=Ut(c,{}),P=0;P<k;P++){var ee=N[P];h(ee.offset),ee.locator=Ut(c,{})}i.locator=$,Ft(N,i,b)&&u.push(N),i.locator=c}else Ft(N,i,b)&&u.push(N);N.uri==="http://www.w3.org/1999/xhtml"&&!N.closed?_=gi(r,_,N.tagName,s,i):_++}}catch(I){n.error("element parse error: "+I),_=-1}_>p?p=_:o(Math.max(g,p)+1)}}function Ut(r,t){return t.lineNumber=r.lineNumber,t.columnNumber=r.columnNumber,t}function pi(r,t,e,i,n,a){for(var s,o,h=++t,f=Ee;;){var l=r.charAt(h);switch(l){case"=":if(f===ne)s=r.slice(t,h),f=De;else if(f===he)f=De;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===De||f===ne)if(f===ne&&(a.warning('attribute value must after "="'),s=r.slice(t,h)),t=h+1,h=r.indexOf(l,t),h>0)o=r.slice(t,h).replace(/&#?\w+;/g,n),e.add(s,o,t-1),f=ce;else throw new Error("attribute value no end '"+l+"' match");else if(f==ue)o=r.slice(t,h).replace(/&#?\w+;/g,n),e.add(s,o,t),a.warning('attribute "'+s+'" missed start quot('+l+")!!"),t=h+1,f=ce;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Ee:e.setTagName(r.slice(t,h));case ce:case Te:case Ve:f=Ve,e.closed=!0;case ue:case ne:case he:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),f==Ee&&e.setTagName(r.slice(t,h)),h;case">":switch(f){case Ee:e.setTagName(r.slice(t,h));case ce:case Te:case Ve:break;case ue:case ne:o=r.slice(t,h),o.slice(-1)==="/"&&(e.closed=!0,o=o.slice(0,-1));case he:f===he&&(o=s),f==ue?(a.warning('attribute "'+o+'" missed quot(")!!'),e.add(s,o.replace(/&#?\w+;/g,n),t)):((i[""]!=="http://www.w3.org/1999/xhtml"||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),e.add(o,o,t));break;case De:throw new Error("attribute value missed!!")}return h;case"\x80":l=" ";default:if(l<=" ")switch(f){case Ee:e.setTagName(r.slice(t,h)),f=Te;break;case ne:s=r.slice(t,h),f=he;break;case ue:var o=r.slice(t,h).replace(/&#?\w+;/g,n);a.warning('attribute "'+o+'" missed quot(")!!'),e.add(s,o,t);case ce:f=Te;break}else switch(f){case he:e.tagName,(i[""]!=="http://www.w3.org/1999/xhtml"||!s.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),e.add(s,s,t),t=h,f=ne;break;case ce:a.warning('attribute space is required"'+s+'"!!');case Te:f=ne,t=h;break;case De:f=ue,t=h;break;case Ve:throw new Error("elements closed character '/' and '>' must be connected to")}}h++}}function Ft(r,t,e){for(var i=r.tagName,n=null,a=r.length;a--;){var s=r[a],o=s.qName,h=s.value,c=o.indexOf(":");if(c>0)var f=s.prefix=o.slice(0,c),l=o.slice(c+1),d=f==="xmlns"&&l;else l=o,f=null,d=o==="xmlns"&&"";s.localName=l,d!==!1&&(n==null&&(n={},Gt(e,e={})),e[d]=n[d]=h,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(d,h))}for(var a=r.length;a--;){s=r[a];var f=s.prefix;f&&(f==="xml"&&(s.uri="http://www.w3.org/XML/1998/namespace"),f!=="xmlns"&&(s.uri=e[f||""]))}var c=i.indexOf(":");c>0?(f=r.prefix=i.slice(0,c),l=r.localName=i.slice(c+1)):(f=null,l=r.localName=i);var u=r.uri=e[f||""];if(t.startElement(u,l,i,r),r.closed){if(t.endElement(u,l,i),n)for(f in n)t.endPrefixMapping(f)}else return r.currentNSMap=e,r.localNSMap=n,!0}function gi(r,t,e,i,n){if(/^(?:script|textarea)$/i.test(e)){var a=r.indexOf("</"+e+">",t),s=r.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(e)?(n.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,i),n.characters(s,0,s.length),a)}return t+1}function mi(r,t,e,i){var n=i[e];return n==null&&(n=r.lastIndexOf("</"+e+">"),n<t&&(n=r.lastIndexOf("</"+e)),i[e]=n),n<t}function Gt(r,t){for(var e in r)t[e]=r[e]}function wi(r,t,e,i){var n=r.charAt(t+2);switch(n){case"-":if(r.charAt(t+3)==="-"){var a=r.indexOf("-->",t+4);return a>t?(e.comment(r,t+4,a-t-4),a+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(r.substr(t+3,6)=="CDATA["){var a=r.indexOf("]]>",t+9);return e.startCDATA(),e.characters(r,t+9,a-t-9),e.endCDATA(),a+3}var s=_i(r,t),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var h=s[1][0],f=o>3&&/^public$/i.test(s[2][0])&&s[3][0],l=o>4&&s[4][0],d=s[o-1];return e.startDTD(h,f&&f.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),e.endDTD(),d.index+d[0].length}}return-1}function yi(r,t,e){var i=r.indexOf("?>",t);if(i){var n=r.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return n?(n[0].length,e.processingInstruction(n[1],n[2]),i+2):-1}return-1}function Vt(r){}Vt.prototype={setTagName:function(r){if(!Mt.test(r))throw new Error("invalid tagName:"+r);this.tagName=r},add:function(r,t,e){if(!Mt.test(r))throw new Error("invalid attribute:"+r);this[this.length++]={qName:r,value:t,offset:e}},length:0,getLocalName:function(r){return this[r].localName},getLocator:function(r){return this[r].locator},getQName:function(r){return this[r].qName},getURI:function(r){return this[r].uri},getValue:function(r){return this[r].value}};function Ke(r,t){return r.__proto__=t,r}Ke({},Ke.prototype)instanceof Ke||(Ke=function(r,t){function e(){}e.prototype=t,e=new e;for(t in r)e[t]=r[t];return e});function _i(r,t){var e,i=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(r);e=n.exec(r);)if(i.push(e),e[1])return i}Pt.XMLReader=Lt;var Ze={};function Se(r,t){for(var e in r)t[e]=r[e]}function G(r,t){var e=r.prototype;if(Object.create){var i=Object.create(t.prototype);e.__proto__=i}if(!(e instanceof t)){let n=function(){};n.prototype=t.prototype,n=new n,Se(e,n),r.prototype=e=n}e.constructor!=r&&(typeof r!="function"&&console.error("unknow Class:"+r),e.constructor=r)}var xi="http://www.w3.org/1999/xhtml",V={},Q=V.ELEMENT_NODE=1,ve=V.ATTRIBUTE_NODE=2,ze=V.TEXT_NODE=3,Kt=V.CDATA_SECTION_NODE=4,Zt=V.ENTITY_REFERENCE_NODE=5,bi=V.ENTITY_NODE=6,zt=V.PROCESSING_INSTRUCTION_NODE=7,$t=V.COMMENT_NODE=8,Yt=V.DOCUMENT_NODE=9,Ht=V.DOCUMENT_TYPE_NODE=10,te=V.DOCUMENT_FRAGMENT_NODE=11,Ei=V.NOTATION_NODE=12,L={},B={};L.INDEX_SIZE_ERR=(B[1]="Index size error",1);L.DOMSTRING_SIZE_ERR=(B[2]="DOMString size error",2);var Di=L.HIERARCHY_REQUEST_ERR=(B[3]="Hierarchy request error",3);L.WRONG_DOCUMENT_ERR=(B[4]="Wrong document",4);L.INVALID_CHARACTER_ERR=(B[5]="Invalid character",5);L.NO_DATA_ALLOWED_ERR=(B[6]="No data allowed",6);L.NO_MODIFICATION_ALLOWED_ERR=(B[7]="No modification allowed",7);var Ti=L.NOT_FOUND_ERR=(B[8]="Not found",8);L.NOT_SUPPORTED_ERR=(B[9]="Not supported",9);var Xt=L.INUSE_ATTRIBUTE_ERR=(B[10]="Attribute in use",10);L.INVALID_STATE_ERR=(B[11]="Invalid state",11);L.SYNTAX_ERR=(B[12]="Syntax error",12);L.INVALID_MODIFICATION_ERR=(B[13]="Invalid modification",13);L.NAMESPACE_ERR=(B[14]="Invalid namespace",14);L.INVALID_ACCESS_ERR=(B[15]="Invalid access",15);function de(r,t){if(t instanceof Error)var e=t;else e=this,Error.call(this,B[r]),this.message=B[r],Error.captureStackTrace&&Error.captureStackTrace(this,de);return e.code=r,t&&(this.message=this.message+": "+t),e}de.prototype=Error.prototype;Se(L,de);function ae(){}ae.prototype={length:0,item:function(r){return this[r]||null},toString:function(r,t){for(var e=[],i=0;i<this.length;i++)ge(this[i],e,r,t);return e.join("")}};function Ne(r,t){this._node=r,this._refresh=t,ut(this)}function ut(r){var t=r._node._inc||r._node.ownerDocument._inc;if(r._inc!=t){var e=r._refresh(r._node);lr(r,"length",e.length),Se(e,r),r._inc=t}}Ne.prototype.item=function(r){return ut(this),this[r]};G(Ne,ae);function $e(){}function jt(r,t){for(var e=r.length;e--;)if(r[e]===t)return e}function Wt(r,t,e,i){if(i?t[jt(t,i)]=e:t[t.length++]=e,r){e.ownerElement=r;var n=r.ownerDocument;n&&(i&&er(n,r,i),Si(n,r,e))}}function Qt(r,t,e){var i=jt(t,e);if(i>=0){for(var n=t.length-1;i<n;)t[i]=t[++i];if(t.length=n,r){var a=r.ownerDocument;a&&(er(a,r,e),e.ownerElement=null)}}else throw de(Ti,new Error(r.tagName+"@"+e))}$e.prototype={length:0,item:ae.prototype.item,getNamedItem:function(r){for(var t=this.length;t--;){var e=this[t];if(e.nodeName==r)return e}},setNamedItem:function(r){var t=r.ownerElement;if(t&&t!=this._ownerElement)throw new de(Xt);var e=this.getNamedItem(r.nodeName);return Wt(this._ownerElement,this,r,e),e},setNamedItemNS:function(r){var t=r.ownerElement,e;if(t&&t!=this._ownerElement)throw new de(Xt);return e=this.getNamedItemNS(r.namespaceURI,r.localName),Wt(this._ownerElement,this,r,e),e},removeNamedItem:function(r){var t=this.getNamedItem(r);return Qt(this._ownerElement,this,t),t},removeNamedItemNS:function(r,t){var e=this.getNamedItemNS(r,t);return Qt(this._ownerElement,this,e),e},getNamedItemNS:function(r,t){for(var e=this.length;e--;){var i=this[e];if(i.localName==t&&i.namespaceURI==r)return i}return null}};function Jt(r){if(this._features={},r)for(var t in r)this._features=r[t]}Jt.prototype={hasFeature:function(r,t){var e=this._features[r.toLowerCase()];return!!(e&&(!t||t in e))},createDocument:function(r,t,e){var i=new Ae;if(i.implementation=this,i.childNodes=new ae,i.doctype=e,e&&i.appendChild(e),t){var n=i.createElementNS(r,t);i.appendChild(n)}return i},createDocumentType:function(r,t,e){var i=new gt;return i.name=r,i.nodeName=r,i.publicId=t,i.systemId=e,i}};function U(){}U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,t){return rr(this,r,t)},replaceChild:function(r,t){this.insertBefore(r,t),t&&this.removeChild(t)},removeChild:function(r){return tr(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return yt(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var t=r.nextSibling;t&&t.nodeType==ze&&r.nodeType==ze?(this.removeChild(t),r.appendData(t.data)):(r.normalize(),r=t)}},isSupported:function(r,t){return this.ownerDocument.implementation.hasFeature(r,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var t=this;t;){var e=t._nsMap;if(e){for(var i in e)if(e[i]==r)return i}t=t.nodeType==ve?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(r){for(var t=this;t;){var e=t._nsMap;if(e&&r in e)return e[r];t=t.nodeType==ve?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(r){var t=this.lookupPrefix(r);return t==null}};function qt(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}Se(V,U);Se(V,U.prototype);function Ye(r,t){if(t(r))return!0;if(r=r.firstChild)do if(Ye(r,t))return!0;while(r=r.nextSibling)}function Ae(){}function Si(r,t,e){r&&r._inc++;var i=e.namespaceURI;i=="http://www.w3.org/2000/xmlns/"&&(t._nsMap[e.prefix?e.localName:""]=e.value)}function er(r,t,e,i){r&&r._inc++;var n=e.namespaceURI;n=="http://www.w3.org/2000/xmlns/"&&delete t._nsMap[e.prefix?e.localName:""]}function ct(r,t,e){if(r&&r._inc){r._inc++;var i=t.childNodes;if(e)i[i.length++]=e;else{for(var n=t.firstChild,a=0;n;)i[a++]=n,n=n.nextSibling;i.length=a}}}function tr(r,t){var e=t.previousSibling,i=t.nextSibling;return e?e.nextSibling=i:r.firstChild=i,i?i.previousSibling=e:r.lastChild=e,ct(r.ownerDocument,r),t}function rr(r,t,e){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===te){var n=t.firstChild;if(n==null)return t;var a=t.lastChild}else n=a=t;var s=e?e.previousSibling:r.lastChild;n.previousSibling=s,a.nextSibling=e,s?s.nextSibling=n:r.firstChild=n,e==null?r.lastChild=a:e.previousSibling=a;do n.parentNode=r;while(n!==a&&(n=n.nextSibling));return ct(r.ownerDocument||r,r),t.nodeType==te&&(t.firstChild=t.lastChild=null),t}function Ni(r,t){var e=t.parentNode;if(e){var i=r.lastChild;e.removeChild(t);var i=r.lastChild}var i=r.lastChild;return t.parentNode=r,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:r.firstChild=t,r.lastChild=t,ct(r.ownerDocument,r,t),t}Ae.prototype={nodeName:"#document",nodeType:Yt,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,t){if(r.nodeType==te){for(var e=r.firstChild;e;){var i=e.nextSibling;this.insertBefore(e,t),e=i}return r}return this.documentElement==null&&r.nodeType==Q&&(this.documentElement=r),rr(this,r,t),r.ownerDocument=this,r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),tr(this,r)},importNode:function(r,t){return fr(this,r,t)},getElementById:function(r){var t=null;return Ye(this.documentElement,function(e){if(e.nodeType==Q&&e.getAttribute("id")==r)return t=e,!0}),t},createElement:function(r){var t=new pe;t.ownerDocument=this,t.nodeName=r,t.tagName=r,t.childNodes=new ae;var e=t.attributes=new $e;return e._ownerElement=t,t},createDocumentFragment:function(){var r=new Xe;return r.ownerDocument=this,r.childNodes=new ae,r},createTextNode:function(r){var t=new vt;return t.ownerDocument=this,t.appendData(r),t},createComment:function(r){var t=new dt;return t.ownerDocument=this,t.appendData(r),t},createCDATASection:function(r){var t=new pt;return t.ownerDocument=this,t.appendData(r),t},createProcessingInstruction:function(r,t){var e=new wt;return e.ownerDocument=this,e.tagName=e.target=r,e.nodeValue=e.data=t,e},createAttribute:function(r){var t=new He;return t.ownerDocument=this,t.name=r,t.nodeName=r,t.localName=r,t.specified=!0,t},createEntityReference:function(r){var t=new mt;return t.ownerDocument=this,t.nodeName=r,t},createElementNS:function(r,t){var e=new pe,i=t.split(":"),n=e.attributes=new $e;return e.childNodes=new ae,e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.namespaceURI=r,i.length==2?(e.prefix=i[0],e.localName=i[1]):e.localName=t,n._ownerElement=e,e},createAttributeNS:function(r,t){var e=new He,i=t.split(":");return e.ownerDocument=this,e.nodeName=t,e.name=t,e.namespaceURI=r,e.specified=!0,i.length==2?(e.prefix=i[0],e.localName=i[1]):e.localName=t,e}};G(Ae,U);function pe(){this._nsMap={}}pe.prototype={nodeType:Q,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var t=this.getAttributeNode(r);return t&&t.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,t){var e=this.ownerDocument.createAttribute(r);e.value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(r){var t=this.getAttributeNode(r);t&&this.removeAttributeNode(t)},appendChild:function(r){return r.nodeType===te?this.insertBefore(r,null):Ni(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,t){var e=this.getAttributeNodeNS(r,t);e&&this.removeAttributeNode(e)},hasAttributeNS:function(r,t){return this.getAttributeNodeNS(r,t)!=null},getAttributeNS:function(r,t){var e=this.getAttributeNodeNS(r,t);return e&&e.value||""},setAttributeNS:function(r,t,e){var i=this.ownerDocument.createAttributeNS(r,t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},getAttributeNodeNS:function(r,t){return this.attributes.getNamedItemNS(r,t)},getElementsByTagName:function(r){return new Ne(this,function(t){var e=[];return Ye(t,function(i){i!==t&&i.nodeType==Q&&(r==="*"||i.tagName==r)&&e.push(i)}),e})},getElementsByTagNameNS:function(r,t){return new Ne(this,function(e){var i=[];return Ye(e,function(n){n!==e&&n.nodeType===Q&&(r==="*"||n.namespaceURI===r)&&(t==="*"||n.localName==t)&&i.push(n)}),i})}};Ae.prototype.getElementsByTagName=pe.prototype.getElementsByTagName;Ae.prototype.getElementsByTagNameNS=pe.prototype.getElementsByTagNameNS;G(pe,U);function He(){}He.prototype.nodeType=ve;G(He,U);function Ie(){}Ie.prototype={data:"",substringData:function(r,t){return this.data.substring(r,r+t)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,t){this.replaceData(r,0,t)},appendChild:function(r){throw new Error(B[Di])},deleteData:function(r,t){this.replaceData(r,t,"")},replaceData:function(r,t,e){var i=this.data.substring(0,r),n=this.data.substring(r+t);e=i+e+n,this.nodeValue=this.data=e,this.length=e.length}};G(Ie,U);function vt(){}vt.prototype={nodeName:"#text",nodeType:ze,splitText:function(r){var t=this.data,e=t.substring(r);t=t.substring(0,r),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(e);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};G(vt,Ie);function dt(){}dt.prototype={nodeName:"#comment",nodeType:$t};G(dt,Ie);function pt(){}pt.prototype={nodeName:"#cdata-section",nodeType:Kt};G(pt,Ie);function gt(){}gt.prototype.nodeType=Ht;G(gt,U);function ir(){}ir.prototype.nodeType=Ei;G(ir,U);function nr(){}nr.prototype.nodeType=bi;G(nr,U);function mt(){}mt.prototype.nodeType=Zt;G(mt,U);function Xe(){}Xe.prototype.nodeName="#document-fragment";Xe.prototype.nodeType=te;G(Xe,U);function wt(){}wt.prototype.nodeType=zt;G(wt,U);function ar(){}ar.prototype.serializeToString=function(r,t,e){return or.call(r,t,e)};U.prototype.toString=or;function or(r,t){var e=[],i=this.nodeType==9?this.documentElement:this,n=i.prefix,a=i.namespaceURI;if(a&&n==null){var n=i.lookupPrefix(a);if(n==null)var s=[{namespace:a,prefix:null}]}return ge(this,e,r,t,s),e.join("")}function sr(r,t,e){var i=r.prefix||"",n=r.namespaceURI;if(!i&&!n||i==="xml"&&n==="http://www.w3.org/XML/1998/namespace"||n=="http://www.w3.org/2000/xmlns/")return!1;for(var a=e.length;a--;){var s=e[a];if(s.prefix==i)return s.namespace!=n}return!0}function ge(r,t,e,i,n){if(i)if(r=i(r),r){if(typeof r=="string"){t.push(r);return}}else return;switch(r.nodeType){case Q:n||(n=[]),n.length;var a=r.attributes,s=a.length,o=r.firstChild,h=r.tagName;e=xi===r.namespaceURI||e,t.push("<",h);for(var f=0;f<s;f++){var l=a.item(f);l.prefix=="xmlns"?n.push({prefix:l.localName,namespace:l.value}):l.nodeName=="xmlns"&&n.push({prefix:"",namespace:l.value})}for(var f=0;f<s;f++){var l=a.item(f);if(sr(l,e,n)){var d=l.prefix||"",c=l.namespaceURI,u=d?" xmlns:"+d:" xmlns";t.push(u,'="',c,'"'),n.push({prefix:d,namespace:c})}ge(l,t,e,i,n)}if(sr(r,e,n)){var d=r.prefix||"",c=r.namespaceURI,u=d?" xmlns:"+d:" xmlns";t.push(u,'="',c,'"'),n.push({prefix:d,namespace:c})}if(o||e&&!/^(?:meta|link|img|br|hr|input)$/i.test(h)){if(t.push(">"),e&&/^script$/i.test(h))for(;o;)o.data?t.push(o.data):ge(o,t,e,i,n),o=o.nextSibling;else for(;o;)ge(o,t,e,i,n),o=o.nextSibling;t.push("</",h,">")}else t.push("/>");return;case Yt:case te:for(var o=r.firstChild;o;)ge(o,t,e,i,n),o=o.nextSibling;return;case ve:return t.push(" ",r.name,'="',r.value.replace(/[<&"]/g,qt),'"');case ze:return t.push(r.data.replace(/[<&]/g,qt));case Kt:return t.push("<![CDATA[",r.data,"]]>");case $t:return t.push("<!--",r.data,"-->");case Ht:var m=r.publicId,p=r.systemId;if(t.push("<!DOCTYPE ",r.name),m)t.push(' PUBLIC "',m),p&&p!="."&&t.push('" "',p),t.push('">');else if(p&&p!=".")t.push(' SYSTEM "',p,'">');else{var g=r.internalSubset;g&&t.push(" [",g,"]"),t.push(">")}return;case zt:return t.push("<?",r.target," ",r.data,"?>");case Zt:return t.push("&",r.nodeName,";");default:t.push("??",r.nodeName)}}function fr(r,t,e){var i;switch(t.nodeType){case Q:i=t.cloneNode(!1),i.ownerDocument=r;case te:break;case ve:e=!0;break}if(i||(i=t.cloneNode(!1)),i.ownerDocument=r,i.parentNode=null,e)for(var n=t.firstChild;n;)i.appendChild(fr(r,n,e)),n=n.nextSibling;return i}function yt(r,t,e){var i=new t.constructor;for(var n in t){var a=t[n];typeof a!="object"&&a!=i[n]&&(i[n]=a)}switch(t.childNodes&&(i.childNodes=new ae),i.ownerDocument=r,i.nodeType){case Q:var s=t.attributes,o=i.attributes=new $e,h=s.length;o._ownerElement=i;for(var f=0;f<h;f++)i.setAttributeNode(yt(r,s.item(f),!0));break;case ve:e=!0}if(e)for(var l=t.firstChild;l;)i.appendChild(yt(r,l,e)),l=l.nextSibling;return i}function lr(r,t,e){r[t]=e}try{if(Object.defineProperty){let r=function(t){switch(t.nodeType){case Q:case te:var e=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&e.push(r(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}};Object.defineProperty(Ne.prototype,"length",{get:function(){return ut(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return r(this)},set:function(t){switch(this.nodeType){case Q:case te:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),lr=function(t,e,i){t["$$"+e]=i}}}catch{}Ze.DOMImplementation=Jt;Ze.XMLSerializer=ar;function hr(r){this.options=r||{locator:{}}}hr.prototype.parseFromString=function(r,t){var e=this.options,i=new Ii,n=e.domBuilder||new je,a=e.errorHandler,s=e.locator,o=e.xmlns||{},h={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&n.setDocumentLocator(s),i.errorHandler=Ai(a,n,s),i.domBuilder=e.domBuilder||n,/\/x?html?$/.test(t)&&(h.nbsp="\xA0",h.copy="\xA9",o[""]="http://www.w3.org/1999/xhtml"),o.xml=o.xml||"http://www.w3.org/XML/1998/namespace",r?i.parse(r,o,h):i.errorHandler.error("invalid doc source"),n.doc};function Ai(r,t,e){if(!r){if(t instanceof je)return t;r=t}var i={},n=r instanceof Function;e=e||{};function a(s){var o=r[s];!o&&n&&(o=r.length==2?function(h){r(s,h)}:r),i[s]=o&&function(h){o("[xmldom "+s+"]	"+h+We(e))}||function(){}}return a("warning"),a("error"),a("fatalError"),i}function je(){this.cdata=!1}function me(r,t){t.lineNumber=r.lineNumber,t.columnNumber=r.columnNumber}je.prototype={startDocument:function(){this.doc=new ki().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(r,t,e,i){var n=this.doc,a=n.createElementNS(r,e||t),s=i.length;Qe(this,a),this.currentElement=a,this.locator&&me(this.locator,a);for(var o=0;o<s;o++){var r=i.getURI(o),h=i.getValue(o),e=i.getQName(o),f=n.createAttributeNS(r,e);this.locator&&me(i.getLocator(o),f),f.value=f.nodeValue=h,a.setAttributeNode(f)}},endElement:function(r,t,e){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(r,t){},endPrefixMapping:function(r){},processingInstruction:function(r,t){var e=this.doc.createProcessingInstruction(r,t);this.locator&&me(this.locator,e),Qe(this,e)},ignorableWhitespace:function(r,t,e){},characters:function(r,t,e){if(r=ur.apply(this,arguments),r){if(this.cdata)var i=this.doc.createCDATASection(r);else var i=this.doc.createTextNode(r);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(r)&&this.doc.appendChild(i),this.locator&&me(this.locator,i)}},skippedEntity:function(r){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(r){(this.locator=r)&&(r.lineNumber=0)},comment:function(r,t,e){r=ur.apply(this,arguments);var i=this.doc.createComment(r);this.locator&&me(this.locator,i),Qe(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(r,t,e){var i=this.doc.implementation;if(i&&i.createDocumentType){var n=i.createDocumentType(r,t,e);this.locator&&me(this.locator,n),Qe(this,n)}},warning:function(r){console.warn("[xmldom warning]	"+r,We(this.locator))},error:function(r){console.error("[xmldom error]	"+r,We(this.locator))},fatalError:function(r){throw console.error("[xmldom fatalError]	"+r,We(this.locator)),r}};function We(r){if(r)return`
@`+(r.systemId||"")+"#[line:"+r.lineNumber+",col:"+r.columnNumber+"]"}function ur(r,t,e){return typeof r=="string"?r.substr(t,e):r.length>=t+e||t?new java.lang.String(r,t,e)+"":r}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(r){je.prototype[r]=function(){return null}});function Qe(r,t){r.currentElement?r.currentElement.appendChild(t):r.doc.appendChild(t)}var Ii=Pt.XMLReader,ki=Ge.DOMImplementation=Ze.DOMImplementation;Ge.XMLSerializer=Ze.XMLSerializer;Ge.DOMParser=hr;var _t={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},re,J={};for(re in _t)J[_t[re]]=parseInt(re);var Oi=[J.BitsPerSample,J.ExtraSamples,J.SampleFormat,J.StripByteCounts,J.StripOffsets,J.StripRowCounts,J.TileByteCounts,J.TileOffsets],xt={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",16:"LONG8",17:"SLONG8",18:"IFD8"},cr={};for(re in xt)cr[xt[re]]=parseInt(re);var Ri={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},bt={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},vr={};for(re in bt)vr[bt[re]]=parseInt(re);var Je;typeof window=="undefined"?Je=function(t){var e=Ge.DOMParser;return new e().parseFromString(t,"text/xml")}:typeof window.DOMParser!="undefined"?Je=function(t){return new window.DOMParser().parseFromString(t,"text/xml")}:typeof window.ActiveXObject!="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM")&&(Je=function(t){var e=new window.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e});var dr={fieldTags:J,fieldTagNames:_t,arrayFields:Oi,fieldTypes:cr,fieldTypeNames:xt,photometricInterpretations:Ri,geoKeys:vr,geoKeyNames:bt,parseXml:Je};function Ci(r,t,e,i){for(var n=new Uint8Array(e*i*3),a,s=0,o=0;s<r.length;++s,o+=3)a=256-r[s]/t*256,n[o]=a,n[o+1]=a,n[o+2]=a;return n}function Pi(r,t,e,i){for(var n=new Uint8Array(e*i*3),a,s=0,o=0;s<r.length;++s,o+=3)a=r[s]/t*256,n[o]=a,n[o+1]=a,n[o+2]=a;return n}function Bi(r,t,e,i){for(var n=new Uint8Array(e*i*3),a=t.length/3,s=t.length/3*2,o=0,h=0;o<r.length;++o,h+=3){var f=r[o];n[h]=t[f]/65536*256,n[h+1]=t[f+a]/65536*256,n[h+2]=t[f+s]/65536*256}return n}function Mi(r,t,e){for(var i=new Uint8Array(t*e*3),n,a,s,o,h=0,f=0;h<r.length;h+=4,f+=3)n=r[h],a=r[h+1],s=r[h+2],o=r[h+3],i[f]=255*((255-n)/256)*((255-o)/256),i[f+1]=255*((255-a)/256)*((255-o)/256),i[f+2]=255*((255-s)/256)*((255-o)/256);return i}function Li(r,t,e){for(var i=new Uint8Array(t*e*3),n,a,s,o=0,h=0;o<r.length;o+=3,h+=3)n=r[o],a=r[o+1],s=r[o+2],i[h]=n+1.402*(s-128),i[h+1]=n-.34414*(a-128)-.71414*(s-128),i[h+2]=n+1.772*(a-128);return i}function Ui(r,t,e){for(var i=.008856,n=.206893,a=[3.240479,-1.53715,-.498535,-.969256,1.875992,.041556,.055648,-.204043,1.057311],s=new Uint8Array(t*e*3),o,h,f,l,d,c,u,m,p,g,y,D,_=0,w=0;_<r.length;_+=3,w+=3)o=r[_],h=r[_+1],f=r[_+2],d=Math.pow((o+16)/116,3),m=d>i,d=(m!==0)*(o/903.3)+m*d,y=d,d=m*Math.pow(d,1/3)+(m!==0)*(7.787*d+16/116),l=h/500+d,u=l>n,g=u*Math.pow(l,3)+(u!==0)*((l-16/116)/7.787),c=d-f/200,p=c>n,D=p*Math.pow(c,3)+(p!==0)*((c-16/116)/7.787),g=g*.950456,D=D*1.088754,s[w]=g*a[0]+y*a[1]+D*a[2],s[w+1]=g*a[3]+y*a[4]+D*a[5],s[w+2]=g*a[6]+y*a[7]+D*a[8];return s}var Fi={fromWhiteIsZero:Ci,fromBlackIsZero:Pi,fromPalette:Bi,fromCMYK:Mi,fromYCbCr:Li,fromCIELab:Ui};function pr(){}pr.prototype={isAsync:function(){return typeof this.decodeBlock=="undefined"}};var qe=pr,Gi=qe;function ke(){}ke.prototype=Object.create(Gi.prototype);ke.prototype.constructor=ke;ke.prototype.decodeBlock=function(r){return r};var Vi=ke,Ki=qe,Zi=9,zi=12,Oe=256,et=257;function Et(){this.littleEndian=!1,this.position=0,this._makeEntryLookup=!1,this.dictionary=[]}Et.prototype={constructor:Et,initDictionary:function(){this.dictionary=new Array(258),this.entryLookup={},this.byteLength=Zi;for(var t=0;t<=257;t++)this.dictionary[t]=[t],this._makeEntryLookup&&(this.entryLookup[t]=t)},decompress:function(t){this._makeEntryLookup=!1,this.initDictionary(),this.position=0,this.result=[],t.buffer||(t=new Uint8Array(t));for(var e=new DataView(t.buffer),i=this.getNext(e),n;i!==et;){if(i===Oe){for(this.initDictionary(),i=this.getNext(e);i===Oe;)i=this.getNext(e);if(i>Oe)throw"corrupted code at scanline "+i;if(i===et)break;var a=this.dictionary[i];this.appendArray(this.result,a),n=i}else if(this.dictionary[i]!==void 0){var s=this.dictionary[i];this.appendArray(this.result,s);var o=this.dictionary[n].concat(this.dictionary[i][0]);this.addToDictionary(o),n=i}else{var h=this.dictionary[n];if(!h)throw"Bogus entry. Not in dictionary, "+n+" / "+this.dictionary.length+", position: "+this.position;var f=h.concat(this.dictionary[n][0]);this.appendArray(this.result,f),this.addToDictionary(f),n=i}this.dictionary.length>=Math.pow(2,this.byteLength)-1&&this.byteLength++,i=this.getNext(e)}return new Uint8Array(this.result)},appendArray:function(t,e){for(var i=0;i<e.length;i++)t.push(e[i]);return t},haveBytesChanged:function(){return this.dictionary.length>=Math.pow(2,this.byteLength)?(this.byteLength++,!0):!1},addToDictionary:function(t){return this.dictionary.push(t),this._makeEntryLookup&&(this.entryLookup[t]=this.dictionary.length-1),this.haveBytesChanged(),this.dictionary.length-1},getNext:function(t){var e=this.getByte(t,this.position,this.byteLength);return this.position+=this.byteLength,e},getByte:function(t,e,i){var n=e%8,a=Math.floor(e/8),s=8-n,o=e+i-(a+1)*8,h=8*(a+2)-(e+i),f=(a+2)*8-e;if(h=Math.max(0,h),a>=t.byteLength)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),et;var l=t.getUint8(a,this.littleEndian)&Math.pow(2,8-n)-1;l=l<<i-s;var d=l;if(a+1<t.byteLength){var c=t.getUint8(a+1,this.littleEndian)>>>h;c=c<<Math.max(0,i-f),d+=c}if(o>8&&a+2<t.byteLength){var u=(a+3)*8-(e+i),m=t.getUint8(a+2,this.littleEndian)>>>u;d+=m}return d},compress:function(t){this._makeEntryLookup=!0,this.initDictionary(),this.position=0;var e=[],i=[];e=this.appendArray(e,this.binaryFromByte(Oe,this.byteLength));for(var n=0;n<t.length;n++){var a=[t[n]],s=i.concat(a);if(this.entryLookup[s]!==void 0)i=s;else{var o=this.entryLookup[i],h=this.binaryFromByte(o,this.byteLength);e=this.appendArray(e,h),this.addToDictionary(s),i=a,this.dictionary.length>=Math.pow(2,zi)&&(e=this.appendArray(e,this.binaryFromByte(Oe,this.byteLength)),this.initDictionary())}}var f=this.entryLookup[i],l=this.binaryFromByte(f,this.byteLength);return e=this.appendArray(e,l),e=e=this.appendArray(e,this.binaryFromByte(et,this.byteLength)),this.binary=e,this.result=this.binaryToUint8(e),this.result},byteFromCode:function(t){var e=this.dictionary[t];return e},binaryFromByte:function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,i=new Uint8Array(e),n=0;n<i.length;n++){var a=Math.pow(2,n),s=(t&a)>0;i[i.length-1-n]=s}return i},binaryToNumber:function(t){for(var e=0,i=0;i<t.length;i++)e+=Math.pow(2,t.length-i-1)*t[i];return e},inputToBinary:function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,i=new Uint8Array(t.length*e),n=0;n<t.length;n++){var a=this.binaryFromByte(t[n],e);i.set(a,n*e)}return i},binaryToUint8:function(t){for(var e=new Uint8Array(Math.ceil(t.length/8)),i=0,n=0;n<t.length;n+=8){for(var a=0,s=0;s<8&&n+s<t.length;s++)a=a+t[n+s]*Math.pow(2,8-s-1);e[i]=a,i++}return e}};function Re(){this.decompressor=new Et}Re.prototype=Object.create(Ki.prototype);Re.prototype.constructor=Re;Re.prototype.decodeBlock=function(r){return this.decompressor.decompress(r).buffer};var $i=Re,Ce={},j={},Pe={};(function(r){var t=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function e(a,s){return Object.prototype.hasOwnProperty.call(a,s)}r.assign=function(a){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(!!o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var h in o)e(o,h)&&(a[h]=o[h])}}return a},r.shrinkBuf=function(a,s){return a.length===s?a:a.subarray?a.subarray(0,s):(a.length=s,a)};var i={arraySet:function(a,s,o,h,f){if(s.subarray&&a.subarray){a.set(s.subarray(o,o+h),f);return}for(var l=0;l<h;l++)a[f+l]=s[o+l]},flattenChunks:function(a){var s,o,h,f,l,d;for(h=0,s=0,o=a.length;s<o;s++)h+=a[s].length;for(d=new Uint8Array(h),f=0,s=0,o=a.length;s<o;s++)l=a[s],d.set(l,f),f+=l.length;return d}},n={arraySet:function(a,s,o,h,f){for(var l=0;l<h;l++)a[f+l]=s[o+l]},flattenChunks:function(a){return[].concat.apply([],a)}};r.setTyped=function(a){a?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,n))},r.setTyped(t)})(Pe);function Yi(r,t,e,i){for(var n=r&65535|0,a=r>>>16&65535|0,s=0;e!==0;){s=e>2e3?2e3:e,e-=s;do n=n+t[i++]|0,a=a+n|0;while(--s);n%=65521,a%=65521}return n|a<<16|0}var Hi=Yi;function Xi(){for(var r,t=[],e=0;e<256;e++){r=e;for(var i=0;i<8;i++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}var ji=Xi();function Wi(r,t,e,i){var n=ji,a=i+e;r^=-1;for(var s=i;s<a;s++)r=r>>>8^n[(r^t[s])&255];return r^-1}var Qi=Wi,tt=30,Ji=12,qi=function(t,e){var i,n,a,s,o,h,f,l,d,c,u,m,p,g,y,D,_,w,v,T,E,x,S,N,b;i=t.state,n=t.next_in,N=t.input,a=n+(t.avail_in-5),s=t.next_out,b=t.output,o=s-(e-t.avail_out),h=s+(t.avail_out-257),f=i.dmax,l=i.wsize,d=i.whave,c=i.wnext,u=i.window,m=i.hold,p=i.bits,g=i.lencode,y=i.distcode,D=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;e:do{p<15&&(m+=N[n++]<<p,p+=8,m+=N[n++]<<p,p+=8),w=g[m&D];t:for(;;){if(v=w>>>24,m>>>=v,p-=v,v=w>>>16&255,v===0)b[s++]=w&65535;else if(v&16){T=w&65535,v&=15,v&&(p<v&&(m+=N[n++]<<p,p+=8),T+=m&(1<<v)-1,m>>>=v,p-=v),p<15&&(m+=N[n++]<<p,p+=8,m+=N[n++]<<p,p+=8),w=y[m&_];r:for(;;){if(v=w>>>24,m>>>=v,p-=v,v=w>>>16&255,v&16){if(E=w&65535,v&=15,p<v&&(m+=N[n++]<<p,p+=8,p<v&&(m+=N[n++]<<p,p+=8)),E+=m&(1<<v)-1,E>f){t.msg="invalid distance too far back",i.mode=tt;break e}if(m>>>=v,p-=v,v=s-o,E>v){if(v=E-v,v>d&&i.sane){t.msg="invalid distance too far back",i.mode=tt;break e}if(x=0,S=u,c===0){if(x+=l-v,v<T){T-=v;do b[s++]=u[x++];while(--v);x=s-E,S=b}}else if(c<v){if(x+=l+c-v,v-=c,v<T){T-=v;do b[s++]=u[x++];while(--v);if(x=0,c<T){v=c,T-=v;do b[s++]=u[x++];while(--v);x=s-E,S=b}}}else if(x+=c-v,v<T){T-=v;do b[s++]=u[x++];while(--v);x=s-E,S=b}for(;T>2;)b[s++]=S[x++],b[s++]=S[x++],b[s++]=S[x++],T-=3;T&&(b[s++]=S[x++],T>1&&(b[s++]=S[x++]))}else{x=s-E;do b[s++]=b[x++],b[s++]=b[x++],b[s++]=b[x++],T-=3;while(T>2);T&&(b[s++]=b[x++],T>1&&(b[s++]=b[x++]))}}else if((v&64)==0){w=y[(w&65535)+(m&(1<<v)-1)];continue r}else{t.msg="invalid distance code",i.mode=tt;break e}break}}else if((v&64)==0){w=g[(w&65535)+(m&(1<<v)-1)];continue t}else if(v&32){i.mode=Ji;break e}else{t.msg="invalid literal/length code",i.mode=tt;break e}break}}while(n<a&&s<h);T=p>>3,n-=T,p-=T<<3,m&=(1<<p)-1,t.next_in=n,t.next_out=s,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=s<h?257+(h-s):257-(s-h),i.hold=m,i.bits=p},gr=Pe,we=15,mr=852,wr=592,yr=0,Dt=1,_r=2,en=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],tn=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],rn=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],nn=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],an=function(t,e,i,n,a,s,o,h){var f=h.bits,l=0,d=0,c=0,u=0,m=0,p=0,g=0,y=0,D=0,_=0,w,v,T,E,x,S=null,N=0,b,k=new gr.Buf16(we+1),$=new gr.Buf16(we+1),P=null,ee=0,I,O,X;for(l=0;l<=we;l++)k[l]=0;for(d=0;d<n;d++)k[e[i+d]]++;for(m=f,u=we;u>=1&&k[u]===0;u--);if(m>u&&(m=u),u===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,h.bits=1,0;for(c=1;c<u&&k[c]===0;c++);for(m<c&&(m=c),y=1,l=1;l<=we;l++)if(y<<=1,y-=k[l],y<0)return-1;if(y>0&&(t===yr||u!==1))return-1;for($[1]=0,l=1;l<we;l++)$[l+1]=$[l]+k[l];for(d=0;d<n;d++)e[i+d]!==0&&(o[$[e[i+d]]++]=d);if(t===yr?(S=P=o,b=19):t===Dt?(S=en,N-=257,P=tn,ee-=257,b=256):(S=rn,P=nn,b=-1),_=0,d=0,l=c,x=s,p=m,g=0,T=-1,D=1<<m,E=D-1,t===Dt&&D>mr||t===_r&&D>wr)return 1;for(;;){I=l-g,o[d]<b?(O=0,X=o[d]):o[d]>b?(O=P[ee+o[d]],X=S[N+o[d]]):(O=32+64,X=0),w=1<<l-g,v=1<<p,c=v;do v-=w,a[x+(_>>g)+v]=I<<24|O<<16|X|0;while(v!==0);for(w=1<<l-1;_&w;)w>>=1;if(w!==0?(_&=w-1,_+=w):_=0,d++,--k[l]==0){if(l===u)break;l=e[i+o[d]]}if(l>m&&(_&E)!==T){for(g===0&&(g=m),x+=c,p=l-g,y=1<<p;p+g<u&&(y-=k[p+g],!(y<=0));)p++,y<<=1;if(D+=1<<p,t===Dt&&D>mr||t===_r&&D>wr)return 1;T=_&E,a[T]=m<<24|p<<16|x-s|0}}return _!==0&&(a[x+_]=l-g<<24|64<<16|0),h.bits=m,0},z=Pe,Tt=Hi,q=Qi,on=qi,Be=an,sn=0,xr=1,br=2,Er=4,fn=5,rt=6,fe=0,ln=1,hn=2,H=-2,Dr=-3,Tr=-4,un=-5,Sr=8,Nr=1,Ar=2,Ir=3,kr=4,Or=5,Rr=6,Cr=7,Pr=8,Br=9,Mr=10,it=11,ie=12,St=13,Lr=14,Nt=15,Ur=16,Fr=17,Gr=18,Vr=19,nt=20,at=21,Kr=22,Zr=23,zr=24,$r=25,Yr=26,At=27,Hr=28,Xr=29,R=30,jr=31,cn=32,vn=852,dn=592,pn=15,gn=pn;function Wr(r){return(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24)}function mn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new z.Buf16(320),this.work=new z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Qr(r){var t;return!r||!r.state?H:(t=r.state,r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Nr,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new z.Buf32(vn),t.distcode=t.distdyn=new z.Buf32(dn),t.sane=1,t.back=-1,fe)}function Jr(r){var t;return!r||!r.state?H:(t=r.state,t.wsize=0,t.whave=0,t.wnext=0,Qr(r))}function qr(r,t){var e,i;return!r||!r.state||(i=r.state,t<0?(e=0,t=-t):(e=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?H:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,Jr(r))}function ei(r,t){var e,i;return r?(i=new mn,r.state=i,i.window=null,e=qr(r,t),e!==fe&&(r.state=null),e):H}function wn(r){return ei(r,gn)}var ti=!0,It,kt;function yn(r){if(ti){var t;for(It=new z.Buf32(512),kt=new z.Buf32(32),t=0;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Be(xr,r.lens,0,288,It,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Be(br,r.lens,0,32,kt,0,r.work,{bits:5}),ti=!1}r.lencode=It,r.lenbits=9,r.distcode=kt,r.distbits=5}function ri(r,t,e,i){var n,a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new z.Buf8(a.wsize)),i>=a.wsize?(z.arraySet(a.window,t,e-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),z.arraySet(a.window,t,e-i,n,a.wnext),i-=n,i?(z.arraySet(a.window,t,e-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}function _n(r,t){var e,i,n,a,s,o,h,f,l,d,c,u,m,p,g=0,y,D,_,w,v,T,E,x,S=new z.Buf8(4),N,b,k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!r||!r.state||!r.output||!r.input&&r.avail_in!==0)return H;e=r.state,e.mode===ie&&(e.mode=St),s=r.next_out,n=r.output,h=r.avail_out,a=r.next_in,i=r.input,o=r.avail_in,f=e.hold,l=e.bits,d=o,c=h,x=fe;e:for(;;)switch(e.mode){case Nr:if(e.wrap===0){e.mode=St;break}for(;l<16;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(e.wrap&2&&f===35615){e.check=0,S[0]=f&255,S[1]=f>>>8&255,e.check=q(e.check,S,2,0),f=0,l=0,e.mode=Ar;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((f&255)<<8)+(f>>8))%31){r.msg="incorrect header check",e.mode=R;break}if((f&15)!==Sr){r.msg="unknown compression method",e.mode=R;break}if(f>>>=4,l-=4,E=(f&15)+8,e.wbits===0)e.wbits=E;else if(E>e.wbits){r.msg="invalid window size",e.mode=R;break}e.dmax=1<<E,r.adler=e.check=1,e.mode=f&512?Mr:ie,f=0,l=0;break;case Ar:for(;l<16;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(e.flags=f,(e.flags&255)!==Sr){r.msg="unknown compression method",e.mode=R;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=R;break}e.head&&(e.head.text=f>>8&1),e.flags&512&&(S[0]=f&255,S[1]=f>>>8&255,e.check=q(e.check,S,2,0)),f=0,l=0,e.mode=Ir;case Ir:for(;l<32;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}e.head&&(e.head.time=f),e.flags&512&&(S[0]=f&255,S[1]=f>>>8&255,S[2]=f>>>16&255,S[3]=f>>>24&255,e.check=q(e.check,S,4,0)),f=0,l=0,e.mode=kr;case kr:for(;l<16;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}e.head&&(e.head.xflags=f&255,e.head.os=f>>8),e.flags&512&&(S[0]=f&255,S[1]=f>>>8&255,e.check=q(e.check,S,2,0)),f=0,l=0,e.mode=Or;case Or:if(e.flags&1024){for(;l<16;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}e.length=f,e.head&&(e.head.extra_len=f),e.flags&512&&(S[0]=f&255,S[1]=f>>>8&255,e.check=q(e.check,S,2,0)),f=0,l=0}else e.head&&(e.head.extra=null);e.mode=Rr;case Rr:if(e.flags&1024&&(u=e.length,u>o&&(u=o),u&&(e.head&&(E=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),z.arraySet(e.head.extra,i,a,u,E)),e.flags&512&&(e.check=q(e.check,i,u,a)),o-=u,a+=u,e.length-=u),e.length))break e;e.length=0,e.mode=Cr;case Cr:if(e.flags&2048){if(o===0)break e;u=0;do E=i[a+u++],e.head&&E&&e.length<65536&&(e.head.name+=String.fromCharCode(E));while(E&&u<o);if(e.flags&512&&(e.check=q(e.check,i,u,a)),o-=u,a+=u,E)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Pr;case Pr:if(e.flags&4096){if(o===0)break e;u=0;do E=i[a+u++],e.head&&E&&e.length<65536&&(e.head.comment+=String.fromCharCode(E));while(E&&u<o);if(e.flags&512&&(e.check=q(e.check,i,u,a)),o-=u,a+=u,E)break e}else e.head&&(e.head.comment=null);e.mode=Br;case Br:if(e.flags&512){for(;l<16;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(f!==(e.check&65535)){r.msg="header crc mismatch",e.mode=R;break}f=0,l=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=ie;break;case Mr:for(;l<32;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}r.adler=e.check=Wr(f),f=0,l=0,e.mode=it;case it:if(e.havedict===0)return r.next_out=s,r.avail_out=h,r.next_in=a,r.avail_in=o,e.hold=f,e.bits=l,hn;r.adler=e.check=1,e.mode=ie;case ie:if(t===fn||t===rt)break e;case St:if(e.last){f>>>=l&7,l-=l&7,e.mode=At;break}for(;l<3;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}switch(e.last=f&1,f>>>=1,l-=1,f&3){case 0:e.mode=Lr;break;case 1:if(yn(e),e.mode=nt,t===rt){f>>>=2,l-=2;break e}break;case 2:e.mode=Fr;break;case 3:r.msg="invalid block type",e.mode=R}f>>>=2,l-=2;break;case Lr:for(f>>>=l&7,l-=l&7;l<32;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if((f&65535)!=(f>>>16^65535)){r.msg="invalid stored block lengths",e.mode=R;break}if(e.length=f&65535,f=0,l=0,e.mode=Nt,t===rt)break e;case Nt:e.mode=Ur;case Ur:if(u=e.length,u){if(u>o&&(u=o),u>h&&(u=h),u===0)break e;z.arraySet(n,i,a,u,s),o-=u,a+=u,h-=u,s+=u,e.length-=u;break}e.mode=ie;break;case Fr:for(;l<14;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(e.nlen=(f&31)+257,f>>>=5,l-=5,e.ndist=(f&31)+1,f>>>=5,l-=5,e.ncode=(f&15)+4,f>>>=4,l-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=R;break}e.have=0,e.mode=Gr;case Gr:for(;e.have<e.ncode;){for(;l<3;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}e.lens[k[e.have++]]=f&7,f>>>=3,l-=3}for(;e.have<19;)e.lens[k[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,N={bits:e.lenbits},x=Be(sn,e.lens,0,19,e.lencode,0,e.work,N),e.lenbits=N.bits,x){r.msg="invalid code lengths set",e.mode=R;break}e.have=0,e.mode=Vr;case Vr:for(;e.have<e.nlen+e.ndist;){for(;g=e.lencode[f&(1<<e.lenbits)-1],y=g>>>24,D=g>>>16&255,_=g&65535,!(y<=l);){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(_<16)f>>>=y,l-=y,e.lens[e.have++]=_;else{if(_===16){for(b=y+2;l<b;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(f>>>=y,l-=y,e.have===0){r.msg="invalid bit length repeat",e.mode=R;break}E=e.lens[e.have-1],u=3+(f&3),f>>>=2,l-=2}else if(_===17){for(b=y+3;l<b;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}f>>>=y,l-=y,E=0,u=3+(f&7),f>>>=3,l-=3}else{for(b=y+7;l<b;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}f>>>=y,l-=y,E=0,u=11+(f&127),f>>>=7,l-=7}if(e.have+u>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=R;break}for(;u--;)e.lens[e.have++]=E}}if(e.mode===R)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=R;break}if(e.lenbits=9,N={bits:e.lenbits},x=Be(xr,e.lens,0,e.nlen,e.lencode,0,e.work,N),e.lenbits=N.bits,x){r.msg="invalid literal/lengths set",e.mode=R;break}if(e.distbits=6,e.distcode=e.distdyn,N={bits:e.distbits},x=Be(br,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,N),e.distbits=N.bits,x){r.msg="invalid distances set",e.mode=R;break}if(e.mode=nt,t===rt)break e;case nt:e.mode=at;case at:if(o>=6&&h>=258){r.next_out=s,r.avail_out=h,r.next_in=a,r.avail_in=o,e.hold=f,e.bits=l,on(r,c),s=r.next_out,n=r.output,h=r.avail_out,a=r.next_in,i=r.input,o=r.avail_in,f=e.hold,l=e.bits,e.mode===ie&&(e.back=-1);break}for(e.back=0;g=e.lencode[f&(1<<e.lenbits)-1],y=g>>>24,D=g>>>16&255,_=g&65535,!(y<=l);){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(D&&(D&240)==0){for(w=y,v=D,T=_;g=e.lencode[T+((f&(1<<w+v)-1)>>w)],y=g>>>24,D=g>>>16&255,_=g&65535,!(w+y<=l);){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}f>>>=w,l-=w,e.back+=w}if(f>>>=y,l-=y,e.back+=y,e.length=_,D===0){e.mode=Yr;break}if(D&32){e.back=-1,e.mode=ie;break}if(D&64){r.msg="invalid literal/length code",e.mode=R;break}e.extra=D&15,e.mode=Kr;case Kr:if(e.extra){for(b=e.extra;l<b;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}e.length+=f&(1<<e.extra)-1,f>>>=e.extra,l-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Zr;case Zr:for(;g=e.distcode[f&(1<<e.distbits)-1],y=g>>>24,D=g>>>16&255,_=g&65535,!(y<=l);){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if((D&240)==0){for(w=y,v=D,T=_;g=e.distcode[T+((f&(1<<w+v)-1)>>w)],y=g>>>24,D=g>>>16&255,_=g&65535,!(w+y<=l);){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}f>>>=w,l-=w,e.back+=w}if(f>>>=y,l-=y,e.back+=y,D&64){r.msg="invalid distance code",e.mode=R;break}e.offset=_,e.extra=D&15,e.mode=zr;case zr:if(e.extra){for(b=e.extra;l<b;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}e.offset+=f&(1<<e.extra)-1,f>>>=e.extra,l-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=R;break}e.mode=$r;case $r:if(h===0)break e;if(u=c-h,e.offset>u){if(u=e.offset-u,u>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=R;break}u>e.wnext?(u-=e.wnext,m=e.wsize-u):m=e.wnext-u,u>e.length&&(u=e.length),p=e.window}else p=n,m=s-e.offset,u=e.length;u>h&&(u=h),h-=u,e.length-=u;do n[s++]=p[m++];while(--u);e.length===0&&(e.mode=at);break;case Yr:if(h===0)break e;n[s++]=e.length,h--,e.mode=at;break;case At:if(e.wrap){for(;l<32;){if(o===0)break e;o--,f|=i[a++]<<l,l+=8}if(c-=h,r.total_out+=c,e.total+=c,c&&(r.adler=e.check=e.flags?q(e.check,n,c,s-c):Tt(e.check,n,c,s-c)),c=h,(e.flags?f:Wr(f))!==e.check){r.msg="incorrect data check",e.mode=R;break}f=0,l=0}e.mode=Hr;case Hr:if(e.wrap&&e.flags){for(;l<32;){if(o===0)break e;o--,f+=i[a++]<<l,l+=8}if(f!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=R;break}f=0,l=0}e.mode=Xr;case Xr:x=ln;break e;case R:x=Dr;break e;case jr:return Tr;case cn:default:return H}return r.next_out=s,r.avail_out=h,r.next_in=a,r.avail_in=o,e.hold=f,e.bits=l,(e.wsize||c!==r.avail_out&&e.mode<R&&(e.mode<At||t!==Er))&&ri(r,r.output,r.next_out,c-r.avail_out),d-=r.avail_in,c-=r.avail_out,r.total_in+=d,r.total_out+=c,e.total+=c,e.wrap&&c&&(r.adler=e.check=e.flags?q(e.check,n,c,r.next_out-c):Tt(e.check,n,c,r.next_out-c)),r.data_type=e.bits+(e.last?64:0)+(e.mode===ie?128:0)+(e.mode===nt||e.mode===Nt?256:0),(d===0&&c===0||t===Er)&&x===fe&&(x=un),x}function xn(r){if(!r||!r.state)return H;var t=r.state;return t.window&&(t.window=null),r.state=null,fe}function bn(r,t){var e;return!r||!r.state||(e=r.state,(e.wrap&2)==0)?H:(e.head=t,t.done=!1,fe)}function En(r,t){var e=t.length,i,n,a;return!r||!r.state||(i=r.state,i.wrap!==0&&i.mode!==it)?H:i.mode===it&&(n=1,n=Tt(n,t,e,0),n!==i.check)?Dr:(a=ri(r,t,e,e),a?(i.mode=jr,Tr):(i.havedict=1,fe))}j.inflateReset=Jr;j.inflateReset2=qr;j.inflateResetKeep=Qr;j.inflateInit=wn;j.inflateInit2=ei;j.inflate=_n;j.inflateEnd=xn;j.inflateGetHeader=bn;j.inflateSetDictionary=En;j.inflateInfo="pako inflate (from Nodeca project)";var ye={},ot=Pe,ii=!0,ni=!0;try{String.fromCharCode.apply(null,[0])}catch{ii=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ni=!1}var Me=new ot.Buf8(256);for(var oe=0;oe<256;oe++)Me[oe]=oe>=252?6:oe>=248?5:oe>=240?4:oe>=224?3:oe>=192?2:1;Me[254]=Me[254]=1;ye.string2buf=function(r){var t,e,i,n,a,s=r.length,o=0;for(n=0;n<s;n++)e=r.charCodeAt(n),(e&64512)==55296&&n+1<s&&(i=r.charCodeAt(n+1),(i&64512)==56320&&(e=65536+(e-55296<<10)+(i-56320),n++)),o+=e<128?1:e<2048?2:e<65536?3:4;for(t=new ot.Buf8(o),a=0,n=0;a<o;n++)e=r.charCodeAt(n),(e&64512)==55296&&n+1<s&&(i=r.charCodeAt(n+1),(i&64512)==56320&&(e=65536+(e-55296<<10)+(i-56320),n++)),e<128?t[a++]=e:e<2048?(t[a++]=192|e>>>6,t[a++]=128|e&63):e<65536?(t[a++]=224|e>>>12,t[a++]=128|e>>>6&63,t[a++]=128|e&63):(t[a++]=240|e>>>18,t[a++]=128|e>>>12&63,t[a++]=128|e>>>6&63,t[a++]=128|e&63);return t};function ai(r,t){if(t<65534&&(r.subarray&&ni||!r.subarray&&ii))return String.fromCharCode.apply(null,ot.shrinkBuf(r,t));for(var e="",i=0;i<t;i++)e+=String.fromCharCode(r[i]);return e}ye.buf2binstring=function(r){return ai(r,r.length)};ye.binstring2buf=function(r){for(var t=new ot.Buf8(r.length),e=0,i=t.length;e<i;e++)t[e]=r.charCodeAt(e);return t};ye.buf2string=function(r,t){var e,i,n,a,s=t||r.length,o=new Array(s*2);for(i=0,e=0;e<s;){if(n=r[e++],n<128){o[i++]=n;continue}if(a=Me[n],a>4){o[i++]=65533,e+=a-1;continue}for(n&=a===2?31:a===3?15:7;a>1&&e<s;)n=n<<6|r[e++]&63,a--;if(a>1){o[i++]=65533;continue}n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|n&1023)}return ai(o,i)};ye.utf8border=function(r,t){var e;for(t=t||r.length,t>r.length&&(t=r.length),e=t-1;e>=0&&(r[e]&192)==128;)e--;return e<0||e===0?t:e+Me[r[e]]>t?e:t};var Dn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Tn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function Sn(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Nn=Sn;function An(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var In=An,_e=j,Le=Pe,st=ye,C=Dn,Ot=Tn,kn=Nn,On=In,oi=Object.prototype.toString;function le(r){if(!(this instanceof le))return new le(r);this.options=Le.assign({chunkSize:16384,windowBits:0,to:""},r||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kn,this.strm.avail_out=0;var e=_e.inflateInit2(this.strm,t.windowBits);if(e!==C.Z_OK)throw new Error(Ot[e]);if(this.header=new On,_e.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=st.string2buf(t.dictionary):oi.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=_e.inflateSetDictionary(this.strm,t.dictionary),e!==C.Z_OK)))throw new Error(Ot[e])}le.prototype.push=function(r,t){var e=this.strm,i=this.options.chunkSize,n=this.options.dictionary,a,s,o,h,f,l=!1;if(this.ended)return!1;s=t===~~t?t:t===!0?C.Z_FINISH:C.Z_NO_FLUSH,typeof r=="string"?e.input=st.binstring2buf(r):oi.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;do{if(e.avail_out===0&&(e.output=new Le.Buf8(i),e.next_out=0,e.avail_out=i),a=_e.inflate(e,C.Z_NO_FLUSH),a===C.Z_NEED_DICT&&n&&(a=_e.inflateSetDictionary(this.strm,n)),a===C.Z_BUF_ERROR&&l===!0&&(a=C.Z_OK,l=!1),a!==C.Z_STREAM_END&&a!==C.Z_OK)return this.onEnd(a),this.ended=!0,!1;e.next_out&&(e.avail_out===0||a===C.Z_STREAM_END||e.avail_in===0&&(s===C.Z_FINISH||s===C.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=st.utf8border(e.output,e.next_out),h=e.next_out-o,f=st.buf2string(e.output,o),e.next_out=h,e.avail_out=i-h,h&&Le.arraySet(e.output,e.output,o,h,0),this.onData(f)):this.onData(Le.shrinkBuf(e.output,e.next_out))),e.avail_in===0&&e.avail_out===0&&(l=!0)}while((e.avail_in>0||e.avail_out===0)&&a!==C.Z_STREAM_END);return a===C.Z_STREAM_END&&(s=C.Z_FINISH),s===C.Z_FINISH?(a=_e.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===C.Z_OK):(s===C.Z_SYNC_FLUSH&&(this.onEnd(C.Z_OK),e.avail_out=0),!0)};le.prototype.onData=function(r){this.chunks.push(r)};le.prototype.onEnd=function(r){r===C.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Le.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Rt(r,t){var e=new le(t);if(e.push(r,!0),e.err)throw e.msg||Ot[e.err];return e.result}function Rn(r,t){return t=t||{},t.raw=!0,Rt(r,t)}Ce.Inflate=le;Ce.inflate=Rt;Ce.inflateRaw=Rn;Ce.ungzip=Rt;var Cn=qe,Pn=Ce.inflate;function Ue(){}Ue.prototype=Object.create(Cn.prototype);Ue.prototype.constructor=Ue;Ue.prototype.decodeBlock=function(r){return Pn(new Uint8Array(r)).buffer};var Bn=Ue,Mn=qe;function Fe(){}Fe.prototype=Object.create(Mn.prototype);Fe.prototype.constructor=Fe;Fe.prototype.decodeBlock=function(r){var t=new DataView(r),e=[],i,n;for(i=0;i<r.byteLength;++i){var a=t.getInt8(i);if(a<0){var s=t.getUint8(i+1);for(a=-a,n=0;n<=a;++n)e.push(s);i+=1}else{for(n=0;n<=a;++n)e.push(t.getUint8(i+n+1));i+=a+1}}return new Uint8Array(e).buffer};var Ln=Fe,K=dr,xe=Fi,Un=Vi,Fn=$i,Gn=Bn,Vn=Ln,si=function(t,e,i){for(var n=0,a=e;a<i;++a)n+=t[a];return n},fi=function(t,e,i){switch(t){case 1:switch(e){case 8:return new Uint8Array(i);case 16:return new Uint16Array(i);case 32:return new Uint32Array(i)}break;case 2:switch(e){case 8:return new Int8Array(i);case 16:return new Int16Array(i);case 32:return new Int32Array(i)}break;case 3:switch(e){case 32:return new Float32Array(i);case 64:return new Float64Array(i)}break}throw Error("Unsupported data format/bitsPerSample")};function li(r,t,e,i,n){this.fileDirectory=r,this.geoKeys=t,this.dataView=e,this.littleEndian=i,this.tiles=n?{}:null,this.isTiled=!r.StripOffsets;var a=r.PlanarConfiguration;if(this.planarConfiguration=typeof a=="undefined"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");switch(this.fileDirectory.Compression){case void 0:case 1:this.decoder=new Un;break;case 5:this.decoder=new Fn;break;case 6:throw new Error("JPEG compression not supported.");case 8:this.decoder=new Gn;break;case 32773:this.decoder=new Vn;break;default:throw new Error("Unknown compresseion method identifier: "+this.fileDirectory.Compression)}}li.prototype={getFileDirectory:function(){return this.fileDirectory},getGeoKeys:function(){return this.geoKeys},getWidth:function(){return this.fileDirectory.ImageWidth},getHeight:function(){return this.fileDirectory.ImageLength},getSamplesPerPixel:function(){return this.fileDirectory.SamplesPerPixel},getTileWidth:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()},getTileHeight:function(){return this.isTiled?this.fileDirectory.TileLength:this.fileDirectory.RowsPerStrip},getBytesPerPixel:function(){for(var t=0,e=0;e<this.fileDirectory.BitsPerSample.length;++e){var i=this.fileDirectory.BitsPerSample[e];if(i%8!=0)throw new Error("Sample bit-width of "+i+" is not supported.");if(i!==this.fileDirectory.BitsPerSample[0])throw new Error("Differing size of samples in a pixel are not supported.");t+=i}return t/8},getSampleByteSize:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index "+t+" is out of range.");var e=this.fileDirectory.BitsPerSample[t];if(e%8!=0)throw new Error("Sample bit-width of "+e+" is not supported.");return e/8},getReaderForSample:function(t){var e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,i=this.fileDirectory.BitsPerSample[t];switch(e){case 1:switch(i){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(i){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(i){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}},getArrayForSample:function(t,e){var i=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,n=this.fileDirectory.BitsPerSample[t];return fi(i,n,e)},getDecoder:function(){return this.decoder},getTileOrStrip:function(t,e,i,n){var a=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),o,h=this.tiles;if(this.planarConfiguration===1?o=e*a+t:this.planarConfiguration===2&&(o=i*a*s+e*a+t),h!==null&&o in h)return n?n(null,{x:t,y:e,sample:i,data:h[o]}):h[o];var f,l;this.isTiled?(f=this.fileDirectory.TileOffsets[o],l=this.fileDirectory.TileByteCounts[o]):(f=this.fileDirectory.StripOffsets[o],l=this.fileDirectory.StripByteCounts[o]);var d=this.dataView.buffer.slice(f,f+l);if(n)return this.getDecoder().decodeBlockAsync(d,function(u,m){!u&&h!==null&&(h[o]=m),n(u,{x:t,y:e,sample:i,data:m})});var c=this.getDecoder().decodeBlock(d);return h!==null&&(h[o]=c),c},_readRasterAsync:function(t,e,i,n,a,s){var o=this.getTileWidth(),h=this.getTileHeight(),f=Math.floor(t[0]/o),l=Math.ceil(t[2]/o),d=Math.floor(t[1]/h),c=Math.ceil(t[3]/h);Math.ceil(this.getWidth()/o);var u=t[2]-t[0];t[3]-t[1];var m=this.getBytesPerPixel();this.getWidth();for(var p=this.fileDirectory.Predictor||1,g=[],y=[],D=0;D<e.length;++D)this.planarConfiguration===1?g.push(si(this.fileDirectory.BitsPerSample,0,e[D])/8):g.push(0),y.push(this.getReaderForSample(e[D]));var _=!1,w=0,v=this.littleEndian,T=null;function E(){_&&w===0&&(T?s(T):a(i))}function x($,P){if($)T=$;else for(var ee=new DataView(P.data),I=P.y*h,O=P.x*o,X=(P.y+1)*h,be=(P.x+1)*o,F=P.sample,M=Math.max(0,t[1]-I);M<Math.min(h,h-(X-t[3]));++M)for(var Y=Math.max(0,t[0]-O);Y<Math.min(o,o-(be-t[2]));++Y){var se=(M*o+Y)*m,Z=y[F].call(ee,se+g[F],v),W;n?(p!==1&&Y>0&&(W=(M+I-t[1])*u*e.length+(Y+O-t[0]-1)*e.length+F,Z+=i[W]),W=(M+I-t[1])*u*e.length+(Y+O-t[0])*e.length+F,i[W]=Z):(p!==1&&Y>0&&(W=(M+I-t[1])*u+Y-1+O-t[0],Z+=i[F][W]),W=(M+I-t[1])*u+Y+O-t[0],i[F][W]=Z)}w-=1,E()}for(var S=d;S<=c;++S)for(var N=f;N<=l;++N)for(var b=0;b<e.length;++b){var k=e[b];this.planarConfiguration===2&&(m=this.getSampleByteSize(k)),w+=1,this.getTileOrStrip(N,S,k,x)}_=!0,E()},_readRaster:function(t,e,i,n,a,s){try{for(var o=this.getTileWidth(),h=this.getTileHeight(),f=Math.floor(t[0]/o),l=Math.ceil(t[2]/o),d=Math.floor(t[1]/h),c=Math.ceil(t[3]/h),u=Math.ceil(this.getWidth()/o),m=t[2]-t[0],p=t[3]-t[1],g=this.getBytesPerPixel(),y=this.getWidth(),D=this.fileDirectory.Predictor||1,_=[],w=[],v=0;v<e.length;++v)this.planarConfiguration===1?_.push(si(this.fileDirectory.BitsPerSample,0,e[v])/8):_.push(0),w.push(this.getReaderForSample(e[v]));for(var T=d;T<c;++T)for(var E=f;E<l;++E)for(var x=T*h,S=E*o,N=(T+1)*h,b=(E+1)*o,k=0;k<e.length;++k){var $=e[k];this.planarConfiguration===2&&(g=this.getSampleByteSize($));var P=new DataView(this.getTileOrStrip(E,T,$)),ee=w[k],I=Math.min(h,h-(N-t[3])),O=Math.min(o,o-(b-t[2])),X=(I*o+O)*g,be=new Uint8Array(P.buffer).length;2*be!==X&&this._debugMessages&&console.warn("dimension mismatch",be,X);for(var F=Math.max(0,t[1]-x);F<I;++F)for(var M=Math.max(0,t[0]-S);M<O;++M){var Y=(F*o+M)*g,se=0;Y<be-1&&(se=ee.call(P,Y+_[k],this.littleEndian));var Z;n?(D!==1&&M>0&&(Z=(F+x-t[1])*m*e.length+(M+S-t[0]-1)*e.length+k,se+=i[Z]),Z=(F+x-t[1])*m*e.length+(M+S-t[0])*e.length+k,i[Z]=se):(D!==1&&M>0&&(Z=(F+x-t[1])*m+M-1+S-t[0],se+=i[k][Z]),Z=(F+x-t[1])*m+M+S-t[0],i[k][Z]=se)}}return a(i),i}catch(W){return s(W)}},readRasters:function(){var t,e,i;switch(arguments.length){case 0:break;case 1:typeof arguments[0]=="function"?e=arguments[0]:t=arguments[0];break;case 2:typeof arguments[0]=="function"?(e=arguments[0],i=arguments[1]):(t=arguments[0],e=arguments[1]);break;case 3:t=arguments[0],e=arguments[1],i=arguments[2];break;default:throw new Error("Invalid number of arguments passed.")}t=t||{},i=i||function(p){console.error(p)};var n=t.window||[0,0,this.getWidth(),this.getHeight()],a=t.samples,s=t.interleave;if(n[0]<0||n[1]<0||n[2]>this.getWidth()||n[3]>this.getHeight())throw new Error("Select window is out of image bounds.");if(n[0]>n[2]||n[1]>n[3])throw new Error("Invalid subsets");var o=n[2]-n[0],h=n[3]-n[1],f=o*h,l;if(a){for(l=0;l<a.length;++l)if(a[l]>=this.fileDirectory.SamplesPerPixel)throw new RangeError("Invalid sample index '"+a[l]+"'.")}else for(a=[],l=0;l<this.fileDirectory.SamplesPerPixel;++l)a.push(l);var d;if(s){var c=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,u=Math.max.apply(null,this.fileDirectory.BitsPerSample);d=fi(c,u,f*a.length)}else for(d=[],l=0;l<a.length;++l)d.push(this.getArrayForSample(a[l],f));var m=this.getDecoder();if(m.isAsync()){if(!e)throw new Error("No callback specified for asynchronous raster reading.");return this._readRasterAsync(n,a,d,s,e,i)}else return e=e||function(){},this._readRaster(n,a,d,s,e,i)},readRGB:function(){var t=null,e=null,i=null;switch(arguments.length){case 0:break;case 1:typeof arguments[0]=="function"?e=arguments[0]:t=arguments[0];break;case 2:typeof arguments[0]=="function"?(e=arguments[0],i=arguments[1]):(t=arguments[0],e=arguments[1]);break;case 3:t=arguments[0],e=arguments[1],i=arguments[2];break;default:throw new Error("Invalid number of arguments passed.")}t=t||{},i=i||function(u){console.error(u)};var n=t.window||[0,0,this.getWidth(),this.getHeight()];if(n[0]<0||n[1]<0||n[2]>this.getWidth()||n[3]>this.getHeight())throw new Error("Select window is out of image bounds.");if(n[0]>n[2]||n[1]>n[3])throw new Error("Invalid subsets");var a=n[2]-n[0],s=n[3]-n[1],o=this.fileDirectory.PhotometricInterpretation,h=this.fileDirectory.BitsPerSample[0],f=Math.pow(2,h);if(o===K.photometricInterpretations.RGB)return this.readRasters({window:t.window,interleave:!0},e,i);var l;switch(o){case K.photometricInterpretations.WhiteIsZero:case K.photometricInterpretations.BlackIsZero:case K.photometricInterpretations.Palette:l=[0];break;case K.photometricInterpretations.CMYK:l=[0,1,2,3];break;case K.photometricInterpretations.YCbCr:case K.photometricInterpretations.CIELab:l=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}var d={window:t.window,interleave:!0,samples:l},c=this.fileDirectory;return this.readRasters(d,function(u){switch(o){case K.photometricInterpretations.WhiteIsZero:return e(xe.fromWhiteIsZero(u,f,a,s));case K.photometricInterpretations.BlackIsZero:return e(xe.fromBlackIsZero(u,f,a,s));case K.photometricInterpretations.Palette:return e(xe.fromPalette(u,c.ColorMap,a,s));case K.photometricInterpretations.CMYK:return e(xe.fromCMYK(u,a,s));case K.photometricInterpretations.YCbCr:return e(xe.fromYCbCr(u,a,s));case K.photometricInterpretations.CIELab:return e(xe.fromCIELab(u,a,s))}},i)},getTiePoints:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t},getGDALMetadata:function(){var t={};if(!this.fileDirectory.GDAL_METADATA)return null;for(var e=this.fileDirectory.GDAL_METADATA,i=K.parseXml(e.substring(0,e.length-1)),n=i.evaluate("GDALMetadata/Item",i,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),a=0;a<n.snapshotLength;++a){var s=n.snapshotItem(a);t[s.getAttribute("name")]=s.textContent}return t},getOrigin:function(){var t=this.fileDirectory.ModelTiepoint;if(!t||t.length!==6)throw new Error("The image does not have an affine transformation.");return[t[3],t[4],t[5]]},getResolution:function(){if(!this.fileDirectory.ModelPixelScale)throw new Error("The image does not have an affine transformation.");return[this.fileDirectory.ModelPixelScale[0],this.fileDirectory.ModelPixelScale[1],this.fileDirectory.ModelPixelScale[2]]},pixelIsArea:function(){return this.geoKeys.GTRasterTypeGeoKey===1},getBoundingBox:function(){var t=this.getOrigin(),e=this.getResolution(),i=t[0],n=t[1],a=i+e[0]*this.getWidth(),s=n+e[1]*this.getHeight();return[Math.min(i,a),Math.min(n,s),Math.max(i,a),Math.max(n,s)]}};var Kn=li,Zn=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();function zn(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var $n=function(){function r(t){zn(this,r),this._dataView=new DataView(t)}return Zn(r,[{key:"getUint64",value:function(e,i){var n=this.getUint32(e,i),a=this.getUint32(e+4,i);return i?n<<32|a:a<<32|n}},{key:"getInt64",value:function(e,i){var n,a;return i?(n=this.getInt32(e,i),a=this.getUint32(e+4,i),n<<32|a):(n=this.getUint32(e,i),a=this.getInt32(e+4,i),a<<32|n)}},{key:"getUint8",value:function(e,i){return this._dataView.getUint8(e,i)}},{key:"getInt8",value:function(e,i){return this._dataView.getInt8(e,i)}},{key:"getUint16",value:function(e,i){return this._dataView.getUint16(e,i)}},{key:"getInt16",value:function(e,i){return this._dataView.getInt16(e,i)}},{key:"getUint32",value:function(e,i){return this._dataView.getUint32(e,i)}},{key:"getInt32",value:function(e,i){return this._dataView.getInt32(e,i)}},{key:"getFloat32",value:function(e,i){return this._dataView.getFloat32(e,i)}},{key:"getFloat64",value:function(e,i){return this._dataView.getFloat64(e,i)}},{key:"buffer",get:function(){return this._dataView.buffer}}]),r}(),Yn=$n,ft=dr,Hn=Kn,Xn=Yn,A=ft.fieldTypes,hi=ft.fieldTagNames,jn=ft.arrayFields,Wn=ft.geoKeyNames;function ui(r,t){this.dataView=new Xn(r),t=t||{},this.cache=t.cache||!1;var e=this.dataView.getUint16(0,0);if(e===18761)this.littleEndian=!0;else if(e===19789)this.littleEndian=!1;else throw new TypeError("Invalid byte order value.");var i=this.dataView.getUint16(2,this.littleEndian);if(this.dataView.getUint16(2,this.littleEndian)===42)this.bigTiff=!1;else if(i===43){this.bigTiff=!0;var n=this.dataView.getUint16(4,this.littleEndian);if(n!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");this.fileDirectories=this.parseFileDirectories(this.getOffset(this.bigTiff?8:4))}ui.prototype={getOffset:function(t){return this.bigTiff?this.dataView.getUint64(t,this.littleEndian):this.dataView.getUint32(t,this.littleEndian)},getFieldTypeLength:function(t){switch(t){case A.BYTE:case A.ASCII:case A.SBYTE:case A.UNDEFINED:return 1;case A.SHORT:case A.SSHORT:return 2;case A.LONG:case A.SLONG:case A.FLOAT:return 4;case A.RATIONAL:case A.SRATIONAL:case A.DOUBLE:case A.LONG8:case A.SLONG8:case A.IFD8:return 8;default:throw new RangeError("Invalid field type: "+t)}},getValues:function(t,e,i){var n=null,a=null,s=this.getFieldTypeLength(t),o;switch(t){case A.BYTE:case A.ASCII:case A.UNDEFINED:n=new Uint8Array(e),a=this.dataView.getUint8;break;case A.SBYTE:n=new Int8Array(e),a=this.dataView.getInt8;break;case A.SHORT:n=new Uint16Array(e),a=this.dataView.getUint16;break;case A.SSHORT:n=new Int16Array(e),a=this.dataView.getInt16;break;case A.LONG:n=new Uint32Array(e),a=this.dataView.getUint32;break;case A.SLONG:n=new Int32Array(e),a=this.dataView.getInt32;break;case A.LONG8:case A.IFD8:n=new Array(e),a=this.dataView.getUint64;break;case A.SLONG8:n=new Array(e),a=this.dataView.getInt64;break;case A.RATIONAL:n=new Uint32Array(e*2),a=this.dataView.getUint32;break;case A.SRATIONAL:n=new Int32Array(e*2),a=this.dataView.getInt32;break;case A.FLOAT:n=new Float32Array(e),a=this.dataView.getFloat32;break;case A.DOUBLE:n=new Float64Array(e),a=this.dataView.getFloat64;break;default:throw new RangeError("Invalid field type: "+t)}if(t===A.RATIONAL||t===A.SRATIONAL)for(o=0;o<e;o+=2)n[o]=a.call(this.dataView,i+o*s,this.littleEndian),n[o+1]=a.call(this.dataView,i+(o*s+4),this.littleEndian);else for(o=0;o<e;++o)n[o]=a.call(this.dataView,i+o*s,this.littleEndian);return t===A.ASCII?String.fromCharCode.apply(null,n):n},getFieldValues:function(t,e,i,n){var a,s=this.getFieldTypeLength(e);if(s*i<=(this.bigTiff?8:4))a=this.getValues(e,i,n);else{var o=this.getOffset(n);a=this.getValues(e,i,o)}return i===1&&jn.indexOf(t)===-1&&!(e===A.RATIONAL||e===A.SRATIONAL)?a[0]:a},parseGeoKeyDirectory:function(t){var e=t.GeoKeyDirectory;if(!e)return null;for(var i={},n=4;n<e[3]*4;n+=4){var a=Wn[e[n]],s=e[n+1]?hi[e[n+1]]:null,o=e[n+2],h=e[n+3],f=null;if(!s)f=h;else{if(f=t[s],typeof f=="undefined"||f===null)throw new Error("Could not get value of geoKey '"+a+"'.");typeof f=="string"?f=f.substring(h,h+o-1):f.subarray&&(f=f.subarray(h,h+o-1))}i[a]=f}return i},parseFileDirectories:function(t){for(var e=t,i=[];e!==0;){for(var n=this.bigTiff?this.dataView.getUint64(e,this.littleEndian):this.dataView.getUint16(e,this.littleEndian),a={},s=e+(this.bigTiff?8:2),o=0;o<n;s+=this.bigTiff?20:12,++o){var h=this.dataView.getUint16(s,this.littleEndian),f=this.dataView.getUint16(s+2,this.littleEndian),l=this.bigTiff?this.dataView.getUint64(s+4,this.littleEndian):this.dataView.getUint32(s+4,this.littleEndian);a[hi[h]]=this.getFieldValues(h,f,l,s+(this.bigTiff?12:8))}i.push([a,this.parseGeoKeyDirectory(a)]),e=this.getOffset(s)}return i},getImage:function(t){t=t||0;var e=this.fileDirectories[t];if(!e)throw new RangeError("Invalid image index");return new Hn(e[0],e[1],this.dataView,this.littleEndian,this.cache)},getImageCount:function(){return this.fileDirectories.length}};var Qn=ui;(function(r){var t=Qn,e=function(n,a){var s,o,h,f;if(typeof n=="string"||n instanceof String)for(s=new ArrayBuffer(n.length*2),f=new Uint16Array(s),o=0,h=n.length;o<h;++o)f[o]=n.charCodeAt(o);else if(n instanceof ArrayBuffer)s=n;else throw new Error("Invalid input data given.");return new t(s,a)};r.exports.parse=e,typeof window!="undefined"&&(window.GeoTIFF={parse:e})})(Ct);(function(r){var t=ci.exports,e=Ct.exports;t.LeafletGeotiff=t.ImageOverlay.extend({options:{arrowSize:20,band:0,image:0,opacity:1,renderer:null},initialize:function(i,n){if(typeof e=="undefined")throw new Error("GeoTIFF not defined");this._url=i,this.raster={},t.Util.setOptions(this,n),this.options.bounds&&(this._rasterBounds=t.latLngBounds(n.bounds)),this.options.renderer&&this.options.renderer.setParent(this),this._getData()},setURL:function(i){this._url=i,this._getData()},onAdd:function(i){this._map=i,this._image||this._initImage(),i._panes.overlayPane.appendChild(this._image),i.on("moveend",this._reset,this),i.options.zoomAnimation&&t.Browser.any3d&&i.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(i){i.getPanes().overlayPane.removeChild(this._image),i.off("moveend",this._reset,this),i.options.zoomAnimation&&i.off("zoomanim",this._animateZoom,this)},_getData:function(){var i=this,n=new XMLHttpRequest;n.onload=function(){this.status>=200&&this.status<400&&i._parseTIFF(this.response)},n.open("GET",this._url,!0),n.responseType="arraybuffer",n.send()},_parseTIFF:function(i){if(this.tiff=e.parse(i),this.setBand(this.options.band),!this.options.bounds){var n=this.tiff.getImage(this.options.image),a=n.getFileDirectory(),s=a.ModelTiepoint[3],o=s+a.ModelPixelScale[0]*a.ImageWidth,h=a.ModelTiepoint[4],f=h-a.ModelPixelScale[1]*a.ImageLength;this._rasterBounds=t.latLngBounds([[h,s],[f,o]]),this._reset()}},setBand:function(i){this.options.band=i;var n=this.tiff.getImage(this.options.image);this.raster.data=n.readRasters({samples:[i]})[0],this.raster.width=n.getWidth(),this.raster.height=n.getHeight(),this._reset()},getRasterArray:function(){return this.raster.data},getRasterCols:function(){return this.raster.width},getRasterRows:function(){return this.raster.height},getValueAtLatLng:function(i,n){try{var a=Math.floor(this.raster.width*(n-this._rasterBounds._southWest.lng)/(this._rasterBounds._northEast.lng-this._rasterBounds._southWest.lng)),s=this.raster.height-Math.ceil(this.raster.height*(i-this._rasterBounds._southWest.lat)/(this._rasterBounds._northEast.lat-this._rasterBounds._southWest.lat)),o=s*this.raster.width+a;return this.raster.data[o]}catch{return}},_animateZoom:function(i){if(t.version>="1.0"){var n=this._map.getZoomScale(i.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._map.getBounds(),i.zoom,i.center).min;t.DomUtil.setTransform(this._image,a,n)}else{var n=this._map.getZoomScale(i.zoom),s=this._map.getBounds().getNorthWest(),o=this._map.getBounds().getSouthEast(),h=this._map._latLngToNewLayerPoint(s,i.zoom,i.center);this._map._latLngToNewLayerPoint(o,i.zoom,i.center)._subtract(h),this._image.style[t.DomUtil.TRANSFORM]=t.DomUtil.getTranslateString(h)+" scale("+n+") "}},_reset:function(){this.hasOwnProperty("_map")&&this._rasterBounds&&(topLeft=this._map.latLngToLayerPoint(this._map.getBounds().getNorthWest()),size=this._map.latLngToLayerPoint(this._map.getBounds().getSouthEast())._subtract(topLeft),t.DomUtil.setPosition(this._image,topLeft),this._image.style.width=size.x+"px",this._image.style.height=size.y+"px",this._drawImage())},setClip:function(i){this.options.clip=i,this._reset()},_clipMaskToPixelPoints:function(){if(this.options.clip){for(var i=this._map.latLngToLayerPoint(this._map.getBounds().getNorthWest()),n=[],a=0;a<this.options.clip.length;a++){var s=this._map.latLngToLayerPoint(this.options.clip[a]),o=t.point(s.x-i.x,s.y-i.y);n.push(o)}this._pixelClipPoints=n}else this._pixelClipPoints=void 0},_drawImage:function(){if(this.raster.hasOwnProperty("data")){var i={};if(topLeft=this._map.latLngToLayerPoint(this._map.getBounds().getNorthWest()),size=this._map.latLngToLayerPoint(this._map.getBounds().getSouthEast())._subtract(topLeft),i.rasterPixelBounds=t.bounds(this._map.latLngToContainerPoint(this._rasterBounds.getNorthWest()),this._map.latLngToContainerPoint(this._rasterBounds.getSouthEast())),i.xStart=i.rasterPixelBounds.min.x>0?i.rasterPixelBounds.min.x:0,i.xFinish=i.rasterPixelBounds.max.x<size.x?i.rasterPixelBounds.max.x:size.x,i.yStart=i.rasterPixelBounds.min.y>0?i.rasterPixelBounds.min.y:0,i.yFinish=i.rasterPixelBounds.max.y<size.y?i.rasterPixelBounds.max.y:size.y,i.plotWidth=i.xFinish-i.xStart,i.plotHeight=i.yFinish-i.yStart,i.plotWidth<=0||i.plotHeight<=0){console.log(this.options.name," is off screen.");var n=document.createElement("canvas");n.width=size.x,n.height=size.y;var a=n.getContext("2d");a.globalAlpha=this.options.opacity,a.clearRect(0,0,n.width,n.height),this._image.src=n.toDataURL();return}i.xOrigin=this._map.getPixelBounds().min.x+i.xStart,i.yOrigin=this._map.getPixelBounds().min.y+i.yStart,i.lngSpan=(this._rasterBounds._northEast.lng-this._rasterBounds._southWest.lng)/this.raster.width,i.latSpan=(this._rasterBounds._northEast.lat-this._rasterBounds._southWest.lat)/this.raster.height;var n=document.createElement("canvas");n.width=size.x,n.height=size.y;var a=n.getContext("2d");if(a.globalAlpha=this.options.opacity,a.clearRect(0,0,n.width,n.height),this.options.renderer.render(this.raster,n,a,i),this.options.clip){this._clipMaskToPixelPoints(),a.globalCompositeOperation="destination-out",a.rect(i.xStart-10,i.yStart-10,i.plotWidth+20,i.plotHeight+20);for(var s=this._pixelClipPoints.length-1;s>=0;s--){var o=this._pixelClipPoints[s];a.lineTo(o.x,o.y)}a.closePath(),a.fill()}this._image.src=String(n.toDataURL())}},transform:function(i,n){var a;try{a=new ImageData(n.plotWidth,n.plotHeight)}catch{a=document.createElement("canvas").getContext("2d").createImageData(n.plotWidth,n.plotHeight)}var s=a.data,o=new Uint32Array(s.buffer),h=i.data,f=new Uint32Array(h.buffer),l=this._map.getZoom(),d=this._map.options.crs.scale(l),c=57.29577951308232,u=this._map.options.crs.transformation._a,m=this._map.options.crs.transformation._b,p=this._map.options.crs.transformation._c,g=this._map.options.crs.transformation._d;t.version>="1.0"&&(u=u*this._map.options.crs.projection.R,p=p*this._map.options.crs.projection.R);for(var y=0;y<n.plotHeight;y++)for(var D=((n.yOrigin+y)/d-g)/p,_=(2*Math.atan(Math.exp(D))-Math.PI/2)*c,w=this.raster.height-Math.ceil((_-this._rasterBounds._southWest.lat)/n.latSpan),v=0;v<n.plotWidth;v++){var T=y*n.plotWidth+v,E=((n.xOrigin+v)/d-m)/u,x=E*c,S=Math.floor((x-this._rasterBounds._southWest.lng)/n.lngSpan),N=w*this.raster.width+S;o[T]=f[N]}return a}}),t.LeafletGeotiffRenderer=t.Class.extend({initialize:function(i){t.setOptions(this,i)},setParent:function(i){this.parent=i},render:function(i,n,a,s){throw new Error("Abstract class")}}),t.leafletGeotiff=function(i,n){return new t.LeafletGeotiff(i,n)},r.exports=t})(lt);var Jn=lt.exports,ea=Object.freeze(vi({__proto__:null,[Symbol.toStringTag]:"Module",default:Jn},[lt.exports]));export{lt as a,ea as l};
